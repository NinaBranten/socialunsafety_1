<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />



<meta name="date" content="2025-05-08" />

<title>BETA MODELS GLMM BETA_FAMILY LINK = LOGIT</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="tweaks.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="Data_preparation.html">Data preparation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    LCAs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="LCA_final_model.html">final model</a>
    </li>
    <li>
      <a href="LCA_binair.html">binary</a>
    </li>
    <li>
      <a href="LCA_listwise.html">listwise</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    MAIHDA
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="MAIHDA_final_model.html">final model</a>
    </li>
    <li>
      <a href="MAIHDA_binary.html">binary</a>
    </li>
    <li>
      <a href="Items_seperate.html">items separate</a>
    </li>
    <li>
      <a href="beta_models.html">beta</a>
    </li>
    <li>
      <a href="Multinomial.html">multinomial</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ninabranten/socialunsafety_1">
    <span class="fab fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">BETA MODELS GLMM BETA_FAMILY LINK =
LOGIT</h1>
<h4 class="date">2025-05-08</h4>

</div>


<pre class="r"><code>library(&quot;formatR&quot;)
library(&quot;foreign&quot;)
library(&quot;ggplot2&quot;)
library(&quot;lme4&quot;)
library(&quot;poLCA&quot;)
library(&quot;reprex&quot;)
library(&quot;tidyr&quot;)
library(&quot;klippy&quot;)
library(&quot;dplyr&quot;)
library(&quot;haven&quot;)
library(&quot;psych&quot;)
library(&quot;Matrix&quot;)
library(&quot;lme4&quot;)
library(&quot;merTools&quot;)
library(&quot;sjPlot&quot;)
library(&quot;glmmTMB&quot;)
library(&quot;foreign&quot;)
library(&quot;gt&quot;)
library(&quot;tibble&quot;)
library(&quot;dplyr&quot;)
library(&quot;sjPlot&quot;)
library(&quot;tidyverse&quot;)
library(&quot;broom.mixed&quot;)</code></pre>
<pre class="r"><code>NEA2022 &lt;- readRDS(&quot;data/processed/LCAfinal.rds&quot;)

attach(NEA2022)
set.seed(123)</code></pre>
<pre class="r"><code>#Transform in factor
NEA2022 &lt;- NEA2022 %&gt;%
  mutate(
    migration = trimws(migration),
    education = trimws(education),
    gender = trimws(gender),
    leeftijd = trimws(leeftijd)
  )

NEA2022$gender &lt;- factor(NEA2022$gender, levels = c(&quot;m&quot;, &quot;v&quot;))
NEA2022$migration &lt;- factor(NEA2022$migration,
                            levels = c(&quot;nl&quot;, &quot;eu&quot;, &quot;noeu&quot;))
NEA2022$education &lt;- factor(NEA2022$education,
                            levels = c(&quot;laag&quot;, &quot;middel&quot;, &quot;hoog&quot;))
NEA2022$leeftijd &lt;- factor(NEA2022$leeftijd,
                            levels = c(&quot;15.35&quot;, &quot;35.55&quot;, &quot;55.75&quot;))</code></pre>
<p><br><br></p>
<div id="overall-unsafety-class-6" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Overall unsafety (class
6)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv6 = pmodel7_empv6)

NEA2022$pmodel7_empv6_T &lt;- (NEA2022$pmodel7_empv6 * (29923 - 1) + 0.5) / 29923

flb_6_0 &lt;- glmmTMB(pmodel7_empv6_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_6_1 &lt;- glmmTMB(pmodel7_empv6_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_6_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv6_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -354443.8 -354418.9  177224.9 -354449.8     29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev.
##  intersections (Intercept) 0.0008979 0.02996 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 2.73 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -3.00905    0.01549  -194.3   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_6_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv6_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -354470.9 -354387.9  177245.5 -354490.9     29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev. 
##  intersections (Intercept) 1.939e-09 4.403e-05
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 2.73 
## 
## Conditional model:
##                  Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -3.07240    0.01943 -158.10  &lt; 2e-16 ***
## gender_v         -0.01986    0.01201   -1.65 0.098269 .  
## migration_eu      0.06249    0.02554    2.45 0.014410 *  
## migration_noeu    0.07489    0.01975    3.79 0.000149 ***
## education_laag    0.06264    0.01703    3.68 0.000235 ***
## education_middel  0.05295    0.01328    3.99 6.72e-05 ***
## leeftijd_35.55    0.02635    0.01436    1.84 0.066416 .  
## leeftijd_55.75    0.03617    0.01563    2.31 0.020628 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>tidy(flb_6_1, effects = &quot;fixed&quot;, conf.int = TRUE)</code></pre>
<pre><code>## # A tibble: 8 × 9
##   effect component term  estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 fixed  cond      (Int…  -3.07      0.0194   -158.   0       -3.11     -3.03   
## 2 fixed  cond      gend…  -0.0199    0.0120     -1.65 9.83e-2 -0.0434    0.00368
## 3 fixed  cond      migr…   0.0625    0.0255      2.45 1.44e-2  0.0124    0.113  
## 4 fixed  cond      migr…   0.0749    0.0198      3.79 1.49e-4  0.0362    0.114  
## 5 fixed  cond      educ…   0.0626    0.0170      3.68 2.35e-4  0.0293    0.0960 
## 6 fixed  cond      educ…   0.0529    0.0133      3.99 6.72e-5  0.0269    0.0790 
## 7 fixed  cond      leef…   0.0264    0.0144      1.84 6.64e-2 -0.00179   0.0545 
## 8 fixed  cond      leef…   0.0362    0.0156      2.31 2.06e-2  0.00554   0.0668</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_6_0)
var_y &lt;- mu * (1 - mu) / (1 + 2.73)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.0008979/(0.0008979+0.01190397), &quot;\n&quot;,
    &quot;ICC final: &quot;, 1.939e-09/(1.939e-09+0.01190397), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.0008979-1.939e-09)/0.0008979, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.01190397 
##  ICC model 0:  0.07013819 
##  ICC final:  1.628868e-07 
##  PCV:  0.9999978</code></pre>
<pre class="r"><code>NEA2022$predicted_6 &lt;- predict(flb_6_1, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_6 &lt;- NEA2022$pmodel7_empv6_T - NEA2022$predicted_6

summary_preds_6 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_6 = mean(predicted_6, na.rm = TRUE),
    se_pred_6 = sd(residual_6, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_6, aes(x = leeftijd, y = mean_pred_6, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_6 - se_pred_6,
                    ymax = mean_pred_6 + se_pred_6),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability overall unsafety Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20overall%20unsafety-1.png" width="672" /></p>
<pre class="r"><code>pred_df_6 &lt;- NEA2022 %&gt;%
  mutate(
    pred_6 = predict(flb_6_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_6 = predict(flb_6_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_6 = mean(pred_6, na.rm = TRUE), 
    se_mean_6 = mean(se_pred_6, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_6 &lt;- pred_df_6 %&gt;%
  mutate(
    lower_CI = pred_mean_6 - 1.96 * se_mean_6,
    upper_CI = pred_mean_6 + 1.96 * se_mean_6
  )


list_6 &lt;- pred_df_6 %&gt;%
  arrange(desc(pred_mean_6)) %&gt;%
  mutate(rank = row_number())

top10_6 &lt;- list_6 %&gt;% slice(1:10)
bottom10_6 &lt;- list_6 %&gt;% slice((n() - 9):n())


list_6 &lt;- bind_rows(
  top10_6 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_6 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_6)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_6 se_mean_6 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;m.noeu.laag.55.75  &quot;      0.0522  0.00137    0.0495   0.0549     1 Top 10   
##  2 &quot;m.noeu.middel.55.75&quot;      0.0517  0.00130    0.0492   0.0543     2 Top 10   
##  3 &quot;m.noeu.laag.35.55  &quot;      0.0517  0.00135    0.0491   0.0544     3 Top 10   
##  4 &quot;m.eu.laag.55.75    &quot;      0.0516  0.00158    0.0485   0.0547     4 Top 10   
##  5 &quot;m.noeu.middel.35.55&quot;      0.0513  0.00124    0.0488   0.0537     5 Top 10   
##  6 &quot;v.noeu.laag.55.75  &quot;      0.0512  0.00137    0.0486   0.0539     6 Top 10   
##  7 &quot;m.eu.middel.55.75  &quot;      0.0511  0.00151    0.0482   0.0541     7 Top 10   
##  8 &quot;m.eu.laag.35.55    &quot;      0.0511  0.00156    0.0481   0.0542     8 Top 10   
##  9 &quot;v.noeu.middel.55.75&quot;      0.0508  0.00130    0.0482   0.0533     9 Top 10   
## 10 &quot;v.noeu.laag.35.55  &quot;      0.0508  0.00134    0.0481   0.0534    10 Top 10   
## 11 &quot;m.nl.middel.15.35  &quot;      0.0466  0.000872   0.0448   0.0483    45 Bottom 10
## 12 &quot;v.nl.laag.15.35    &quot;      0.0461  0.000970   0.0442   0.0480    46 Bottom 10
## 13 &quot;v.eu.hoog.15.35    &quot;      0.0461  0.00132    0.0435   0.0487    47 Bottom 10
## 14 &quot;m.nl.hoog.55.75    &quot;      0.0458  0.000847   0.0442   0.0475    48 Bottom 10
## 15 &quot;v.nl.middel.15.35  &quot;      0.0457  0.000846   0.0440   0.0473    49 Bottom 10
## 16 &quot;m.nl.hoog.35.55    &quot;      0.0454  0.000785   0.0438   0.0469    50 Bottom 10
## 17 &quot;v.nl.hoog.55.75    &quot;      0.0450  0.000837   0.0433   0.0466    51 Bottom 10
## 18 &quot;v.nl.hoog.35.55    &quot;      0.0445  0.000761   0.0430   0.0460    52 Bottom 10
## 19 &quot;m.nl.hoog.15.35    &quot;      0.0443  0.000822   0.0426   0.0459    53 Bottom 10
## 20 &quot;v.nl.hoog.15.35    &quot;      0.0434  0.000782   0.0419   0.0450    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="supervisor-unsafety-class-4" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Supervisor unsafety
(Class 4)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv4 = pmodel7_empv4)

NEA2022$pmodel7_empv4_T &lt;- (NEA2022$pmodel7_empv4 * (29923 - 1) + 0.5) / 29923

flb_4_0 &lt;- glmmTMB(pmodel7_empv4_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_4_1 &lt;- glmmTMB(pmodel7_empv4_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_4_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv4_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -307372.3 -307347.4  153689.2 -307378.3     29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev.
##  intersections (Intercept) 0.0002261 0.01504 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 3.04 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -2.98616    0.01366  -218.7   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_4_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv4_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -307380.3 -307297.2  153700.1 -307400.3     29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev.
##  intersections (Intercept) 1.918e-09 4.38e-05
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 3.04 
## 
## Conditional model:
##                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -3.033149   0.018932 -160.21  &lt; 2e-16 ***
## gender_v         -0.007387   0.011988   -0.62  0.53776    
## migration_eu      0.037163   0.025470    1.46  0.14453    
## migration_noeu    0.025979   0.019690    1.32  0.18703    
## education_laag    0.037878   0.016995    2.23  0.02583 *  
## education_middel  0.037236   0.013260    2.81  0.00498 ** 
## leeftijd_35.55    0.025596   0.014325    1.79  0.07397 .  
## leeftijd_55.75    0.046064   0.015591    2.95  0.00313 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>tidy(flb_4_1, effects = &quot;fixed&quot;, conf.int = TRUE)</code></pre>
<pre><code>## # A tibble: 8 × 9
##   effect component term  estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 fixed  cond      (Int… -3.03       0.0189  -160.    0       -3.07      -3.00  
## 2 fixed  cond      gend… -0.00739    0.0120    -0.616 0.538   -0.0309     0.0161
## 3 fixed  cond      migr…  0.0372     0.0255     1.46  0.145   -0.0128     0.0871
## 4 fixed  cond      migr…  0.0260     0.0197     1.32  0.187   -0.0126     0.0646
## 5 fixed  cond      educ…  0.0379     0.0170     2.23  0.0258   0.00457    0.0712
## 6 fixed  cond      educ…  0.0372     0.0133     2.81  0.00498  0.0112     0.0632
## 7 fixed  cond      leef…  0.0256     0.0143     1.79  0.0740  -0.00248    0.0537
## 8 fixed  cond      leef…  0.0461     0.0156     2.95  0.00313  0.0155     0.0766</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_4_0)
var_y &lt;- mu * (1 - mu) / (1 + 3.04)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.0002261/(0.0002261+0.01130487), &quot;\n&quot;,
    &quot;ICC final: &quot;, 1.918e-09/(1.918e-09+0.01130487), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.0002261-1.918e-09)/0.0002261, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.01130487 
##  ICC model 0:  0.01960806 
##  ICC final:  1.696614e-07 
##  PCV:  0.9999915</code></pre>
<pre class="r"><code>NEA2022$predicted_4 &lt;- predict(flb_4_1, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_4 &lt;- NEA2022$pmodel7_empv4_T - NEA2022$predicted_4

summary_preds_4 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_4 = mean(predicted_4, na.rm = TRUE),
    se_pred_4 = sd(residual_4, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_4, aes(x = leeftijd, y = mean_pred_4, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_4 - se_pred_4,
                    ymax = mean_pred_4 + se_pred_4),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability overall unsafety Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20supervisor%20unsafety-1.png" width="672" /></p>
<pre class="r"><code>pred_df_4 &lt;- NEA2022 %&gt;%
  mutate(
    pred_4 = predict(flb_4_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_4 = predict(flb_4_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_4 = mean(pred_4, na.rm = TRUE), 
    se_mean_4 = mean(se_pred_4, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_4 &lt;- pred_df_4 %&gt;%
  mutate(
    lower_CI = pred_mean_4 - 1.96 * se_mean_4,
    upper_CI = pred_mean_4 + 1.96 * se_mean_4
  )


list_4 &lt;- pred_df_4 %&gt;%
  arrange(desc(pred_mean_4)) %&gt;%
  mutate(rank = row_number())

top10_4 &lt;- list_4 %&gt;% slice(1:10)
bottom10_4 &lt;- list_4 %&gt;% slice((n() - 9):n())


list_4 &lt;- bind_rows(
  top10_4 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_4 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_4)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_4 se_mean_4 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;m.eu.laag.55.75    &quot;      0.0516  0.00156    0.0485   0.0546     1 Top 10   
##  2 &quot;m.eu.middel.55.75  &quot;      0.0515  0.00150    0.0486   0.0545     2 Top 10   
##  3 &quot;v.eu.laag.55.75    &quot;      0.0512  0.00156    0.0481   0.0543     3 Top 10   
##  4 &quot;v.eu.middel.55.75  &quot;      0.0512  0.00150    0.0482   0.0541     4 Top 10   
##  5 &quot;m.noeu.laag.55.75  &quot;      0.0510  0.00132    0.0484   0.0536     5 Top 10   
##  6 &quot;m.noeu.middel.55.75&quot;      0.0510  0.00126    0.0485   0.0535     6 Top 10   
##  7 &quot;v.noeu.laag.55.75  &quot;      0.0507  0.00134    0.0480   0.0533     7 Top 10   
##  8 &quot;v.noeu.middel.55.75&quot;      0.0506  0.00127    0.0481   0.0531     8 Top 10   
##  9 &quot;m.eu.laag.35.55    &quot;      0.0506  0.00153    0.0476   0.0536     9 Top 10   
## 10 &quot;m.eu.middel.35.55  &quot;      0.0505  0.00144    0.0477   0.0534    10 Top 10   
## 11 &quot;m.eu.hoog.15.35    &quot;      0.0476  0.00137    0.0449   0.0503    45 Bottom 10
## 12 &quot;v.nl.laag.15.35    &quot;      0.0473  0.000974   0.0454   0.0492    46 Bottom 10
## 13 &quot;v.nl.middel.15.35  &quot;      0.0473  0.000852   0.0456   0.0489    47 Bottom 10
## 14 &quot;v.eu.hoog.15.35    &quot;      0.0473  0.00133    0.0447   0.0499    48 Bottom 10
## 15 &quot;m.noeu.hoog.15.35  &quot;      0.0471  0.00114    0.0449   0.0493    49 Bottom 10
## 16 &quot;m.nl.hoog.35.55    &quot;      0.0471  0.000789   0.0455   0.0486    50 Bottom 10
## 17 &quot;v.noeu.hoog.15.35  &quot;      0.0468  0.00111    0.0446   0.0489    51 Bottom 10
## 18 &quot;v.nl.hoog.35.55    &quot;      0.0468  0.000771   0.0452   0.0483    52 Bottom 10
## 19 &quot;m.nl.hoog.15.35    &quot;      0.0460  0.000830   0.0443   0.0476    53 Bottom 10
## 20 &quot;v.nl.hoog.15.35    &quot;      0.0456  0.000797   0.0441   0.0472    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="coworker-unsafety-class-7" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Coworker unsafety
(Class 7)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv7 = pmodel7_empv7)

NEA2022$pmodel7_empv7_T &lt;- (NEA2022$pmodel7_empv7 * (29923 - 1) + 0.5) / 29923


flb_7_0 &lt;- glmmTMB(pmodel7_empv7_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_7_1 &lt;- glmmTMB(pmodel7_empv7_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_7_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv7_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -171776.8 -171751.9   85891.4 -171782.8     29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev.
##  intersections (Intercept) 9.337e-05 0.009663
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 3.19 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -2.52276    0.01081  -233.4   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_7_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv7_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -171783.1 -171700.0   85901.6 -171803.1     29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev.
##  intersections (Intercept) 1.083e-09 3.29e-05
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 3.19 
## 
## Conditional model:
##                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -2.488360   0.017178 -144.86  &lt; 2e-16 ***
## gender_v         -0.032347   0.012040   -2.69  0.00722 ** 
## migration_eu     -0.008998   0.025541   -0.35  0.72461    
## migration_noeu    0.019284   0.019743    0.98  0.32869    
## education_laag   -0.039282   0.017033   -2.31  0.02110 *  
## education_middel -0.019588   0.013300   -1.47  0.14082    
## leeftijd_35.55    0.007044   0.014363    0.49  0.62384    
## leeftijd_55.75   -0.028287   0.015641   -1.81  0.07052 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>tidy(flb_7_1, effects = &quot;fixed&quot;, conf.int = TRUE)</code></pre>
<pre><code>## # A tibble: 8 × 9
##   effect component term  estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 fixed  cond      (Int… -2.49       0.0172  -145.    0        -2.52    -2.45   
## 2 fixed  cond      gend… -0.0323     0.0120    -2.69  0.00722  -0.0559  -0.00875
## 3 fixed  cond      migr… -0.00900    0.0255    -0.352 0.725    -0.0591   0.0411 
## 4 fixed  cond      migr…  0.0193     0.0197     0.977 0.329    -0.0194   0.0580 
## 5 fixed  cond      educ… -0.0393     0.0170    -2.31  0.0211   -0.0727  -0.00590
## 6 fixed  cond      educ… -0.0196     0.0133    -1.47  0.141    -0.0457   0.00648
## 7 fixed  cond      leef…  0.00704    0.0144     0.490 0.624    -0.0211   0.0352 
## 8 fixed  cond      leef… -0.0283     0.0156    -1.81  0.0705   -0.0589   0.00237</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_7_0)
var_y &lt;- mu * (1 - mu) / (1 + 3.19)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 9.337e-05/(9.337e-05+0.01641693), &quot;\n&quot;,
    &quot;ICC final: &quot;, 1.083e-09/(1.083e-09+0.01641763), &quot;\n&quot;,
    &quot;PCV: &quot;, (9.337e-05-1.083e-09)/9.337e-05, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.01641693 
##  ICC model 0:  0.005655258 
##  ICC final:  6.596567e-08 
##  PCV:  0.9999884</code></pre>
<pre class="r"><code>NEA2022$predicted_7 &lt;- predict(flb_7_1, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_7 &lt;- NEA2022$pmodel7_empv7_T - NEA2022$predicted_7

summary_preds_7 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_7 = mean(predicted_7, na.rm = TRUE),
    se_pred_7 = sd(residual_7, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_7, aes(x = leeftijd, y = mean_pred_7, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_7 - se_pred_7,
                    ymax = mean_pred_7 + se_pred_7),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability coworker unsafety Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20coworker%20unsafety-1.png" width="672" /></p>
<pre class="r"><code>pred_df_7 &lt;- NEA2022 %&gt;%
  mutate(
    pred_7 = predict(flb_7_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_7 = predict(flb_7_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_7 = mean(pred_7, na.rm = TRUE), 
    se_mean_7 = mean(se_pred_7, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_7 &lt;- pred_df_7 %&gt;%
  mutate(
    lower_CI = pred_mean_7 - 1.96 * se_mean_7,
    upper_CI = pred_mean_7 + 1.96 * se_mean_7
  )


list_7 &lt;- pred_df_7 %&gt;%
  arrange(desc(pred_mean_7)) %&gt;%
  mutate(rank = row_number())

top10_7 &lt;- list_7 %&gt;% slice(1:10)
bottom10_7 &lt;- list_7 %&gt;% slice((n() - 9):n())


list_7 &lt;- bind_rows(
  top10_7 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_7 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_7)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_7 se_mean_7 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;m.noeu.hoog.35.55  &quot;      0.0786   0.00169   0.0753   0.0819     1 Top 10   
##  2 &quot;m.noeu.hoog.15.35  &quot;      0.0781   0.00174   0.0747   0.0815     2 Top 10   
##  3 &quot;m.nl.hoog.35.55    &quot;      0.0772   0.00112   0.0750   0.0794     3 Top 10   
##  4 &quot;m.noeu.middel.35.55&quot;      0.0772   0.00170   0.0738   0.0805     4 Top 10   
##  5 &quot;m.nl.hoog.15.35    &quot;      0.0767   0.00122   0.0743   0.0791     5 Top 10   
##  6 &quot;m.noeu.middel.15.35&quot;      0.0767   0.00173   0.0733   0.0800     6 Top 10   
##  7 &quot;m.eu.hoog.35.55    &quot;      0.0765   0.00201   0.0726   0.0805     7 Top 10   
##  8 &quot;v.noeu.hoog.35.55  &quot;      0.0763   0.00163   0.0731   0.0794     8 Top 10   
##  9 &quot;m.eu.hoog.15.35    &quot;      0.0760   0.00205   0.0720   0.0801     9 Top 10   
## 10 &quot;m.noeu.hoog.55.75  &quot;      0.0760   0.00175   0.0726   0.0795    10 Top 10   
## 11 &quot;v.eu.hoog.55.75    &quot;      0.0719   0.00197   0.0680   0.0758    45 Bottom 10
## 12 &quot;v.nl.laag.15.35    &quot;      0.0718   0.00135   0.0691   0.0744    46 Bottom 10
## 13 &quot;v.eu.laag.35.55    &quot;      0.0716   0.00206   0.0676   0.0757    47 Bottom 10
## 14 &quot;m.eu.laag.55.75    &quot;      0.0714   0.00206   0.0674   0.0755    48 Bottom 10
## 15 &quot;v.nl.middel.55.75  &quot;      0.0712   0.00117   0.0689   0.0735    49 Bottom 10
## 16 &quot;v.eu.laag.15.35    &quot;      0.0712   0.00204   0.0672   0.0752    50 Bottom 10
## 17 &quot;v.noeu.laag.55.75  &quot;      0.0712   0.00178   0.0677   0.0746    51 Bottom 10
## 18 &quot;v.eu.middel.55.75  &quot;      0.0706   0.00197   0.0667   0.0745    52 Bottom 10
## 19 &quot;v.nl.laag.55.75    &quot;      0.0699   0.00132   0.0673   0.0725    53 Bottom 10
## 20 &quot;v.eu.laag.55.75    &quot;      0.0693   0.00202   0.0654   0.0733    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="unsafe-social-climate-class-5" class="section level1"
number="4">
<h1><span class="header-section-number">4</span> Unsafe social climate
(Class 5)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv5 = pmodel7_empv5)

NEA2022$pmodel7_empv5_T &lt;- (NEA2022$pmodel7_empv5 * (29923 - 1) + 0.5) / 29923

flb_5_0 &lt;- glmmTMB(pmodel7_empv5_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_5_1 &lt;- glmmTMB(pmodel7_empv5_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_5_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv5_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -146720.2 -146695.3   73363.1 -146726.2     29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.002426 0.04925 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 1.35 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -1.71170    0.01349  -126.9   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_5_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv5_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -146745.8 -146662.8   73382.9 -146765.8     29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev. 
##  intersections (Intercept) 3.259e-09 5.709e-05
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 1.35 
## 
## Conditional model:
##                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -1.818140   0.017761 -102.37  &lt; 2e-16 ***
## gender_v          0.024537   0.013024    1.88   0.0596 .  
## migration_eu      0.008459   0.027636    0.31   0.7595    
## migration_noeu    0.044588   0.021403    2.08   0.0372 *  
## education_laag    0.088501   0.018482    4.79 1.68e-06 ***
## education_middel  0.059496   0.014391    4.13 3.56e-05 ***
## leeftijd_35.55    0.036052   0.015527    2.32   0.0202 *  
## leeftijd_55.75    0.089655   0.016916    5.30 1.16e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>tidy(flb_5_1, effects = &quot;fixed&quot;, conf.int = TRUE)</code></pre>
<pre><code>## # A tibble: 8 × 9
##   effect component term  estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 fixed  cond      (Int… -1.82       0.0178  -102.    0       -1.85e+0   -1.78  
## 2 fixed  cond      gend…  0.0245     0.0130     1.88  5.96e-2 -9.89e-4    0.0501
## 3 fixed  cond      migr…  0.00846    0.0276     0.306 7.60e-1 -4.57e-2    0.0626
## 4 fixed  cond      migr…  0.0446     0.0214     2.08  3.72e-2  2.64e-3    0.0865
## 5 fixed  cond      educ…  0.0885     0.0185     4.79  1.68e-6  5.23e-2    0.125 
## 6 fixed  cond      educ…  0.0595     0.0144     4.13  3.56e-5  3.13e-2    0.0877
## 7 fixed  cond      leef…  0.0361     0.0155     2.32  2.02e-2  5.62e-3    0.0665
## 8 fixed  cond      leef…  0.0897     0.0169     5.30  1.16e-7  5.65e-2    0.123</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_5_0)
var_y &lt;- mu * (1 - mu) / (1 + 1.35)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.002426/(0.002426+0.0547113), &quot;\n&quot;,
    &quot;ICC final: &quot;, 3.259e-09/(3.259e-09+0.05471132), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.002426 - 3.259e-09)/0.002426, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.0547113 
##  ICC model 0:  0.04245913 
##  ICC final:  5.956719e-08 
##  PCV:  0.9999987</code></pre>
<pre class="r"><code>NEA2022$predicted_5 &lt;- predict(flb_5_0, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_5 &lt;- NEA2022$pmodel7_empv5_T - NEA2022$predicted_5

summary_preds_5 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_5 = mean(predicted_5, na.rm = TRUE),
    se_pred_5 = sd(residual_5, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_5, aes(x = leeftijd, y = mean_pred_5, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_5 - se_pred_5,
                    ymax = mean_pred_5 + se_pred_5),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability unsafe social climate Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20unsafe%20social%20climate-1.png" width="672" /></p>
<pre class="r"><code>pred_df_5 &lt;- NEA2022 %&gt;%
  mutate(
    pred_5 = predict(flb_5_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_5 = predict(flb_5_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_5 = mean(pred_5, na.rm = TRUE), 
    se_mean_5 = mean(se_pred_5, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_5 &lt;- pred_df_5 %&gt;%
  mutate(
    lower_CI = pred_mean_5 - 1.96 * se_mean_5,
    upper_CI = pred_mean_5 + 1.96 * se_mean_5
  )


list_5 &lt;- pred_df_5 %&gt;%
  arrange(desc(pred_mean_5)) %&gt;%
  mutate(rank = row_number())

top10_5 &lt;- list_5 %&gt;% slice(1:10)
bottom10_5 &lt;- list_5 %&gt;% slice((n() - 9):n())


list_5 &lt;- bind_rows(
  top10_5 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_5 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_5)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_5 se_mean_5 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;v.noeu.laag.55.75  &quot;       0.172   0.00406    0.164    0.180     1 Top 10   
##  2 &quot;m.noeu.laag.55.75  &quot;       0.169   0.00390    0.161    0.176     2 Top 10   
##  3 &quot;v.noeu.middel.55.75&quot;       0.168   0.00376    0.161    0.175     3 Top 10   
##  4 &quot;v.eu.laag.55.75    &quot;       0.167   0.00464    0.158    0.176     4 Top 10   
##  5 &quot;v.nl.laag.55.75    &quot;       0.166   0.00291    0.160    0.172     5 Top 10   
##  6 &quot;m.noeu.middel.55.75&quot;       0.165   0.00364    0.157    0.172     6 Top 10   
##  7 &quot;v.noeu.laag.35.55  &quot;       0.165   0.00385    0.157    0.172     7 Top 10   
##  8 &quot;m.eu.laag.55.75    &quot;       0.164   0.00454    0.155    0.173     8 Top 10   
##  9 &quot;v.eu.middel.55.75  &quot;       0.163   0.00434    0.154    0.172     9 Top 10   
## 10 &quot;m.nl.laag.55.75    &quot;       0.162   0.00274    0.157    0.168    10 Top 10   
## 11 &quot;m.eu.middel.15.35  &quot;       0.148   0.00398    0.140    0.156    45 Bottom 10
## 12 &quot;v.nl.hoog.35.55    &quot;       0.147   0.00195    0.143    0.151    46 Bottom 10
## 13 &quot;m.nl.middel.15.35  &quot;       0.147   0.00224    0.143    0.151    47 Bottom 10
## 14 &quot;m.noeu.hoog.15.35  &quot;       0.145   0.00317    0.139    0.151    48 Bottom 10
## 15 &quot;m.eu.hoog.35.55    &quot;       0.145   0.00375    0.138    0.152    49 Bottom 10
## 16 &quot;m.nl.hoog.35.55    &quot;       0.144   0.00198    0.140    0.148    50 Bottom 10
## 17 &quot;v.eu.hoog.15.35    &quot;       0.144   0.00374    0.136    0.151    51 Bottom 10
## 18 &quot;v.nl.hoog.15.35    &quot;       0.143   0.00206    0.139    0.147    52 Bottom 10
## 19 &quot;m.eu.hoog.15.35    &quot;       0.141   0.00378    0.133    0.148    53 Bottom 10
## 20 &quot;m.nl.hoog.15.35    &quot;       0.140   0.00213    0.135    0.144    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="short-term-conflict-class-1" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Short-term conflict
(class 1)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv1 = pmodel7_empv1)

NEA2022$pmodel7_empv1_T &lt;- (NEA2022$pmodel7_empv1 * (29923 - 1) + 0.5) / 29923

flb_1_0 &lt;- glmmTMB(pmodel7_empv1_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_1_1 &lt;- glmmTMB(pmodel7_empv1_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_1_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv1_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -221140.9 -221116.0  110573.5 -221146.9     29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.002186 0.04675 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 1.58 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -2.14859    0.01413    -152   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_1_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv1_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##       AIC       BIC    logLik  deviance  df.resid 
## -221164.7 -221081.6  110592.3 -221184.7     29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance  Std.Dev. 
##  intersections (Intercept) 3.377e-09 5.811e-05
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 1.58 
## 
## Conditional model:
##                  Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -2.22423    0.01807 -123.11  &lt; 2e-16 ***
## gender_v         -0.03262    0.01258   -2.59 0.009509 ** 
## migration_eu      0.01297    0.02673    0.49 0.627465    
## migration_noeu    0.03809    0.02069    1.84 0.065543 .  
## education_laag    0.07086    0.01785    3.97 7.17e-05 ***
## education_middel  0.05560    0.01391    4.00 6.45e-05 ***
## leeftijd_35.55    0.05358    0.01502    3.57 0.000361 ***
## leeftijd_55.75    0.08789    0.01636    5.37 7.78e-08 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_1_0)
var_y &lt;- mu * (1 - mu) / (1 + 1.58)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.002186/(0.002186+0.03605616), &quot;\n&quot;,
    &quot;ICC final: &quot;, 3.377e-09/(3.377e-09+0.03605616), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.002186 - 3.377e-09)/0.002186, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.03605616 
##  ICC model 0:  0.05716204 
##  ICC final:  9.365944e-08 
##  PCV:  0.9999985</code></pre>
<pre class="r"><code>NEA2022$predicted_1 &lt;- predict(flb_1_0, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_1 &lt;- NEA2022$pmodel7_empv1_T - NEA2022$predicted_1

summary_preds_1 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_1 = mean(predicted_1, na.rm = TRUE),
    se_pred_1 = sd(residual_1, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_1, aes(x = leeftijd, y = mean_pred_1, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_1 - se_pred_1,
                    ymax = mean_pred_1 + se_pred_1),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability unsafe social climate Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20short-term%20conflict-1.png" width="672" /></p>
<pre class="r"><code>pred_df_1 &lt;- NEA2022 %&gt;%
  mutate(
    pred_1 = predict(flb_1_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_1 = predict(flb_1_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_1 = mean(pred_1, na.rm = TRUE), 
    se_mean_1 = mean(se_pred_1, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_1 &lt;- pred_df_1 %&gt;%
  mutate(
    lower_CI = pred_mean_1 - 1.96 * se_mean_1,
    upper_CI = pred_mean_1 + 1.96 * se_mean_1
  )


list_1 &lt;- pred_df_1 %&gt;%
  arrange(desc(pred_mean_1)) %&gt;%
  mutate(rank = row_number())

top10_1 &lt;- list_1 %&gt;% slice(1:10)
bottom10_1 &lt;- list_1 %&gt;% slice((n() - 9):n())


list_1 &lt;- bind_rows(
  top10_1 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_1 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_1)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_1 se_mean_1 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;m.noeu.laag.55.75  &quot;      0.116    0.00283   0.111    0.122      1 Top 10   
##  2 &quot;m.noeu.middel.55.75&quot;      0.115    0.00266   0.110    0.120      2 Top 10   
##  3 &quot;m.eu.laag.55.75    &quot;      0.114    0.00328   0.107    0.120      3 Top 10   
##  4 &quot;v.noeu.laag.55.75  &quot;      0.113    0.00282   0.108    0.119      4 Top 10   
##  5 &quot;m.noeu.laag.35.55  &quot;      0.113    0.00274   0.108    0.118      5 Top 10   
##  6 &quot;m.nl.laag.55.75    &quot;      0.112    0.00203   0.109    0.116      6 Top 10   
##  7 &quot;m.eu.middel.55.75  &quot;      0.112    0.00312   0.106    0.118      7 Top 10   
##  8 &quot;v.noeu.middel.55.75&quot;      0.112    0.00263   0.106    0.117      8 Top 10   
##  9 &quot;m.noeu.middel.35.55&quot;      0.111    0.00248   0.106    0.116      9 Top 10   
## 10 &quot;m.nl.middel.55.75  &quot;      0.111    0.00176   0.108    0.114     10 Top 10   
## 11 &quot;m.noeu.hoog.15.35  &quot;      0.101    0.00230   0.0965   0.106     45 Bottom 10
## 12 &quot;v.eu.middel.15.35  &quot;      0.101    0.00278   0.0954   0.106     46 Bottom 10
## 13 &quot;v.eu.hoog.35.55    &quot;      0.101    0.00265   0.0954   0.106     47 Bottom 10
## 14 &quot;v.nl.middel.15.35  &quot;      0.0996   0.00162   0.0965   0.103     48 Bottom 10
## 15 &quot;v.nl.hoog.35.55    &quot;      0.0995   0.00145   0.0966   0.102     49 Bottom 10
## 16 &quot;m.eu.hoog.15.35    &quot;      0.0987   0.00272   0.0934   0.104     50 Bottom 10
## 17 &quot;v.noeu.hoog.15.35  &quot;      0.0981   0.00220   0.0938   0.102     51 Bottom 10
## 18 &quot;m.nl.hoog.15.35    &quot;      0.0976   0.00159   0.0945   0.101     52 Bottom 10
## 19 &quot;v.eu.hoog.15.35    &quot;      0.0959   0.00260   0.0908   0.101     53 Bottom 10
## 20 &quot;v.nl.hoog.15.35    &quot;      0.0948   0.00149   0.0918   0.0977    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="safe-class-2" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Safe (Class 2)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv2 = pmodel7_empv2)

NEA2022$pmodel7_empv2_T &lt;- (NEA2022$pmodel7_empv2 * (29923 - 1) + 0.5) / 29923

flb_2_0 &lt;- glmmTMB(pmodel7_empv2_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_2_1 &lt;- glmmTMB(pmodel7_empv2_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_2_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv2_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##      AIC      BIC   logLik deviance df.resid 
## -35366.1 -35341.2  17686.0 -35372.1    29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.005225 0.07229 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 0.817 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -0.38816    0.01559   -24.9   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_2_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv2_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##      AIC      BIC   logLik deviance df.resid 
## -35377.1 -35294.0  17698.5 -35397.1    29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.00193  0.04393 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 0.817 
## 
## Conditional model:
##                   Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -0.289285   0.028464 -10.163  &lt; 2e-16 ***
## gender_v         -0.024721   0.022616  -1.093  0.27436    
## migration_eu     -0.151198   0.035677  -4.238 2.26e-05 ***
## migration_noeu   -0.059665   0.029288  -2.037  0.04163 *  
## education_laag   -0.041048   0.029170  -1.407  0.15936    
## education_middel -0.079476   0.025943  -3.064  0.00219 ** 
## leeftijd_35.55   -0.020738   0.027312  -0.759  0.44767    
## leeftijd_55.75   -0.002534   0.028507  -0.089  0.92918    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_2_0)
var_y &lt;- mu * (1 - mu) / (1 + 0.817)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.005225/(0.005225+0.1330826), &quot;\n&quot;,
    &quot;ICC final: &quot;, 0.00193/(0.00193+0.1330826), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.005225 - 0.00193)/0.005225, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.1330826 
##  ICC model 0:  0.03777811 
##  ICC final:  0.01429496 
##  PCV:  0.630622</code></pre>
<pre class="r"><code>NEA2022$predicted_2 &lt;- predict(flb_2_0, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_2 &lt;- NEA2022$pmodel7_empv2_T - NEA2022$predicted_2

summary_preds_2 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_2 = mean(predicted_2, na.rm = TRUE),
    se_pred_2 = sd(residual_2, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_2, aes(x = leeftijd, y = mean_pred_2, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_2 - se_pred_2,
                    ymax = mean_pred_2 + se_pred_2),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability unsafe social climate Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20safe-1.png" width="672" /></p>
<pre class="r"><code>pred_df_2 &lt;- NEA2022 %&gt;%
  mutate(
    pred_2 = predict(flb_2_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_2 = predict(flb_2_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_2 = mean(pred_2, na.rm = TRUE), 
    se_mean_2 = mean(se_pred_2, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_2 &lt;- pred_df_2 %&gt;%
  mutate(
    lower_CI = pred_mean_2 - 1.96 * se_mean_2,
    upper_CI = pred_mean_2 + 1.96 * se_mean_2
  )


list_2 &lt;- pred_df_2 %&gt;%
  arrange(desc(pred_mean_2)) %&gt;%
  mutate(rank = row_number())

top10_2 &lt;- list_2 %&gt;% slice(1:10)
bottom10_2 &lt;- list_2 %&gt;% slice((n() - 9):n())


list_2 &lt;- bind_rows(
  top10_2 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_2 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_2)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_2 se_mean_2 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;m.nl.hoog.35.55    &quot;       0.439   0.00629    0.427    0.451     1 Top 10   
##  2 &quot;m.nl.hoog.15.35    &quot;       0.435   0.00754    0.420    0.450     2 Top 10   
##  3 &quot;m.nl.hoog.55.75    &quot;       0.431   0.00701    0.417    0.445     3 Top 10   
##  4 &quot;v.nl.laag.55.75    &quot;       0.425   0.00984    0.406    0.444     4 Top 10   
##  5 &quot;v.nl.laag.15.35    &quot;       0.420   0.00953    0.401    0.439     5 Top 10   
##  6 &quot;m.noeu.hoog.55.75  &quot;       0.415   0.0128     0.390    0.440     6 Top 10   
##  7 &quot;v.nl.hoog.15.35    &quot;       0.414   0.00630    0.402    0.427     7 Top 10   
##  8 &quot;v.noeu.hoog.15.35  &quot;       0.413   0.0115     0.391    0.436     8 Top 10   
##  9 &quot;v.nl.hoog.35.55    &quot;       0.413   0.00546    0.402    0.423     9 Top 10   
## 10 &quot;v.nl.middel.35.55  &quot;       0.412   0.00696    0.399    0.426    10 Top 10   
## 11 &quot;m.eu.middel.15.35  &quot;       0.376   0.0136     0.349    0.402    45 Bottom 10
## 12 &quot;m.eu.laag.35.55    &quot;       0.375   0.0139     0.348    0.402    46 Bottom 10
## 13 &quot;v.eu.laag.55.75    &quot;       0.375   0.0142     0.347    0.403    47 Bottom 10
## 14 &quot;m.eu.middel.55.75  &quot;       0.374   0.0136     0.348    0.401    48 Bottom 10
## 15 &quot;v.eu.laag.15.35    &quot;       0.374   0.0137     0.347    0.401    49 Bottom 10
## 16 &quot;m.eu.middel.35.55  &quot;       0.373   0.0132     0.348    0.399    50 Bottom 10
## 17 &quot;v.eu.laag.35.55    &quot;       0.371   0.0139     0.343    0.398    51 Bottom 10
## 18 &quot;v.eu.middel.55.75  &quot;       0.365   0.0134     0.339    0.391    52 Bottom 10
## 19 &quot;v.eu.middel.15.35  &quot;       0.359   0.0131     0.333    0.384    53 Bottom 10
## 20 &quot;v.eu.middel.35.55  &quot;       0.358   0.0125     0.333    0.383    54 Bottom 10</code></pre>
<p><br><br></p>
</div>
<div id="highly-safe-class-3" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Highly safe (Class
3)</h1>
<p><br><br></p>
<pre class="r"><code>NEA2022 &lt;- NEA2022 %&gt;%
  mutate(pmodel7_empv3 = pmodel7_empv3)

NEA2022$pmodel7_empv3_T &lt;- (NEA2022$pmodel7_empv3 * (29923 - 1) + 0.5) / 29923

flb_3_0 &lt;- glmmTMB(pmodel7_empv3_T ~ 1 + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)

flb_3_1 &lt;- glmmTMB(pmodel7_empv3_T ~ gender_v + migration_eu + migration_noeu + 
    education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75  + (1 | intersections),
                  family = beta_family(link = &quot;logit&quot;),
                  data = NEA2022)
summary(flb_3_0)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv3_T ~ 1 + (1 | intersections)
## Data: NEA2022
## 
##      AIC      BIC   logLik deviance df.resid 
## -98124.9 -98100.0  49065.4 -98130.9    29920 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.01372  0.1171  
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 0.745 
## 
## Conditional model:
##             Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept) -0.97560    0.02079  -46.93   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>summary(flb_3_1)</code></pre>
<pre><code>##  Family: beta  ( logit )
## Formula:          pmodel7_empv3_T ~ gender_v + migration_eu + migration_noeu +  
##     education_laag + education_middel + leeftijd_35.55 + leeftijd_55.75 +  
##     (1 | intersections)
## Data: NEA2022
## 
##      AIC      BIC   logLik deviance df.resid 
## -98180.0 -98096.9  49100.0 -98200.0    29913 
## 
## Random effects:
## 
## Conditional model:
##  Groups        Name        Variance Std.Dev.
##  intersections (Intercept) 0.000689 0.02625 
## Number of obs: 29923, groups:  intersections, 54
## 
## Dispersion parameter for beta family (): 0.745 
## 
## Conditional model:
##                  Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)      -0.76514    0.02280  -33.56  &lt; 2e-16 ***
## gender_v          0.07966    0.01849    4.31 1.64e-05 ***
## migration_eu     -0.09739    0.03222   -3.02  0.00251 ** 
## migration_noeu   -0.16370    0.02543   -6.44 1.21e-10 ***
## education_laag   -0.19639    0.02392   -8.21  &lt; 2e-16 ***
## education_middel -0.12971    0.02038   -6.37 1.95e-10 ***
## leeftijd_35.55   -0.10333    0.02159   -4.79 1.69e-06 ***
## leeftijd_55.75   -0.14439    0.02347   -6.15 7.70e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<pre class="r"><code>mu &lt;- fitted(flb_3_0)
var_y &lt;- mu * (1 - mu) / (1 + 0.745)
mean_var_within &lt;- mean(var_y)

cat(&quot;Residual variance: &quot;, mean(var_y), &quot;\n&quot;,
    &quot;ICC model 0: &quot;, 0.01372/(0.01372+0.1169316), &quot;\n&quot;,
    &quot;ICC final: &quot;, 0.000689/(0.000689+0.1169316), &quot;\n&quot;,
    &quot;PCV: &quot;, (0.01372 - 0.000689)/0.01372, &quot;\n&quot;)</code></pre>
<pre><code>## Residual variance:  0.1169316 
##  ICC model 0:  0.1050121 
##  ICC final:  0.005857817 
##  PCV:  0.9497813</code></pre>
<pre class="r"><code>NEA2022$predicted_3 &lt;- predict(flb_3_0, re.form = NULL, type = &quot;response&quot;)

NEA2022$residual_3 &lt;- NEA2022$pmodel7_empv3_T - NEA2022$predicted_3

summary_preds_3 &lt;- NEA2022 %&gt;%
  group_by(gender, migration, education, leeftijd) %&gt;%
  summarise(
    mean_pred_3 = mean(predicted_3, na.rm = TRUE),
    se_pred_3 = sd(residual_3, na.rm = TRUE) / sqrt(n()),
    n = n(),
    .groups = &quot;drop&quot;
  )

gender_labels &lt;- as_labeller(c(
  &quot;m&quot; = &quot;Men&quot;,
  &quot;v&quot; = &quot;Women&quot;
))

migration_labels &lt;- as_labeller(c(
  &quot;nl&quot;   = &quot;No migration background&quot;,
  &quot;eu&quot;   = &quot;European&quot;,
  &quot;noeu&quot; = &quot;Non-European&quot;
))

education_labels &lt;- as_labeller(c(
  &quot;laag&quot;   = &quot;Low&quot;,
  &quot;middel&quot; = &quot;Middle&quot;,
  &quot;hoog&quot;   = &quot;High&quot;
))

ggplot(summary_preds_3, aes(x = leeftijd, y = mean_pred_3, color = gender)) +
  geom_point() +
  geom_errorbar(aes(ymin = mean_pred_3 - se_pred_3,
                    ymax = mean_pred_3 + se_pred_3),
                width = 0,
                alpha = 0.4,
                linewidth = 0.005
                ) + 
  facet_grid(rows = vars(education), cols = vars(migration),
             labeller = labeller(
               education = education_labels,
               migration = migration_labels
             ),
             switch = &quot;y&quot;
  ) +
  labs(
    title = &quot;Predicted probability unsafe social climate Model1&quot;,
    y = NULL,
    x = NULL,
    color = &quot;Gender&quot;
  ) +
  scale_color_manual(values = c(&quot;m&quot; = &quot;steelblue&quot;, &quot;v&quot; = &quot;tomato&quot;),
                     labels = gender_labels) +
  theme_minimal() +
  theme(
    axis.title.y.right = element_text(angle = 90),
    strip.background = element_rect(fill = &quot;gray90&quot;, color = NA),
    strip.placement = &quot;outside&quot;,
    strip.text.y.left = element_text(angle = 0),
    axis.title.y = element_blank(),
    axis.text.y.left = element_blank(),
    axis.ticks.y.left = element_blank(),
    plot.margin = margin(10, 30, 10, 10)
  ) +
  scale_y_continuous(
    name = NULL,
    sec.axis = dup_axis(name = &quot;Predicted Probability&quot;)
  )</code></pre>
<p><img src="beta_models_files/figure-html/Model1:%20Predicted%20probability%20highly%20safe-1.png" width="672" /></p>
<pre class="r"><code>pred_df_3 &lt;- NEA2022 %&gt;%
  mutate(
    pred_3 = predict(flb_3_1, type = &quot;response&quot;, se.fit = TRUE)$fit,
    se_pred_3 = predict(flb_3_1, type = &quot;response&quot;, se.fit = TRUE)$se.fit
  ) %&gt;%
  group_by(intersections) %&gt;%
  summarise(
    pred_mean_3 = mean(pred_3, na.rm = TRUE), 
    se_mean_3 = mean(se_pred_3, na.rm = TRUE)
  ) %&gt;%
  ungroup()

pred_df_3 &lt;- pred_df_3 %&gt;%
  mutate(
    lower_CI = pred_mean_3 - 1.96 * se_mean_3,
    upper_CI = pred_mean_3 + 1.96 * se_mean_3
  )


list_3 &lt;- pred_df_3 %&gt;%
  arrange(desc(pred_mean_3)) %&gt;%
  mutate(rank = row_number())

top10_3 &lt;- list_3 %&gt;% slice(1:10)
bottom10_3 &lt;- list_3 %&gt;% slice((n() - 9):n())


list_3 &lt;- bind_rows(
  top10_3 %&gt;% mutate(type = &quot;Top 10&quot;),
  bottom10_3 %&gt;% mutate(type = &quot;Bottom 10&quot;)
)

print(list_3)</code></pre>
<pre><code>## # A tibble: 20 × 7
##    intersections         pred_mean_3 se_mean_3 lower_CI upper_CI  rank type     
##    &lt;chr&gt;                       &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;    
##  1 &quot;v.nl.hoog.15.35    &quot;       0.334   0.00518    0.323    0.344     1 Top 10   
##  2 &quot;m.nl.hoog.15.35    &quot;       0.324   0.00684    0.310    0.337     2 Top 10   
##  3 &quot;v.eu.hoog.15.35    &quot;       0.313   0.00896    0.295    0.330     3 Top 10   
##  4 &quot;v.nl.hoog.35.55    &quot;       0.312   0.00437    0.304    0.321     4 Top 10   
##  5 &quot;v.nl.middel.15.35  &quot;       0.305   0.00553    0.294    0.316     5 Top 10   
##  6 &quot;v.nl.hoog.55.75    &quot;       0.300   0.00565    0.289    0.311     6 Top 10   
##  7 &quot;v.noeu.hoog.15.35  &quot;       0.297   0.00790    0.282    0.313     7 Top 10   
##  8 &quot;m.eu.hoog.15.35    &quot;       0.297   0.00901    0.280    0.315     8 Top 10   
##  9 &quot;m.nl.hoog.35.55    &quot;       0.295   0.00446    0.287    0.304     9 Top 10   
## 10 &quot;v.nl.middel.35.55  &quot;       0.292   0.00592    0.280    0.303    10 Top 10   
## 11 &quot;m.noeu.laag.15.35  &quot;       0.245   0.00739    0.230    0.259    45 Bottom 10
## 12 &quot;m.eu.middel.55.75  &quot;       0.244   0.00849    0.227    0.261    46 Bottom 10
## 13 &quot;v.noeu.laag.35.55  &quot;       0.240   0.00754    0.225    0.255    47 Bottom 10
## 14 &quot;m.eu.laag.35.55    &quot;       0.239   0.00832    0.222    0.255    48 Bottom 10
## 15 &quot;m.noeu.middel.35.55&quot;       0.238   0.00670    0.225    0.251    49 Bottom 10
## 16 &quot;v.noeu.laag.55.75  &quot;       0.233   0.00751    0.218    0.248    50 Bottom 10
## 17 &quot;m.noeu.middel.55.75&quot;       0.232   0.00737    0.218    0.246    51 Bottom 10
## 18 &quot;m.eu.laag.55.75    &quot;       0.230   0.00821    0.214    0.246    52 Bottom 10
## 19 &quot;m.noeu.laag.35.55  &quot;       0.226   0.00704    0.213    0.240    53 Bottom 10
## 20 &quot;m.noeu.laag.55.75  &quot;       0.220   0.00726    0.206    0.234    54 Bottom 10</code></pre>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkJFVEEgTU9ERUxTIEdMTU0gQkVUQV9GQU1JTFkgTElOSyA9IExPR0lUIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQpkYXRlOiAiMjAyNS0wNS0wOCINCi0tLQ0KDQoNCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KGVjaG8gPSBUUlVFKQ0KYGBgDQoNCg0KYGBge3IgbG9hZGluZyBwYWNrYWdlcywgd2FybmluZz1GQUxTRSwgcmVzdWx0cz0naGlkZScsIG1lc3NhZ2U9RkFMU0V9DQpsaWJyYXJ5KCJmb3JtYXRSIikNCmxpYnJhcnkoImZvcmVpZ24iKQ0KbGlicmFyeSgiZ2dwbG90MiIpDQpsaWJyYXJ5KCJsbWU0IikNCmxpYnJhcnkoInBvTENBIikNCmxpYnJhcnkoInJlcHJleCIpDQpsaWJyYXJ5KCJ0aWR5ciIpDQpsaWJyYXJ5KCJrbGlwcHkiKQ0KbGlicmFyeSgiZHBseXIiKQ0KbGlicmFyeSgiaGF2ZW4iKQ0KbGlicmFyeSgicHN5Y2giKQ0KbGlicmFyeSgiTWF0cml4IikNCmxpYnJhcnkoImxtZTQiKQ0KbGlicmFyeSgibWVyVG9vbHMiKQ0KbGlicmFyeSgic2pQbG90IikNCmxpYnJhcnkoImdsbW1UTUIiKQ0KbGlicmFyeSgiZm9yZWlnbiIpDQpsaWJyYXJ5KCJndCIpDQpsaWJyYXJ5KCJ0aWJibGUiKQ0KbGlicmFyeSgiZHBseXIiKQ0KbGlicmFyeSgic2pQbG90IikNCmxpYnJhcnkoInRpZHl2ZXJzZSIpDQpsaWJyYXJ5KCJicm9vbS5taXhlZCIpDQpgYGANCg0KYGBge3IgbG9hZGluZyBkYXRhLCByZXN1bHRzPSdoaWRlJywgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0NCk5FQTIwMjIgPC0gcmVhZFJEUygiZGF0YS9wcm9jZXNzZWQvTENBZmluYWwucmRzIikNCg0KYXR0YWNoKE5FQTIwMjIpDQpzZXQuc2VlZCgxMjMpDQpgYGANCg0KDQpgYGB7ciB0cmFuc2Zvcm0gaW4gZmFjdG9yLCBjYWNoZT1UUlVFfQ0KI1RyYW5zZm9ybSBpbiBmYWN0b3INCk5FQTIwMjIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKA0KICAgIG1pZ3JhdGlvbiA9IHRyaW13cyhtaWdyYXRpb24pLA0KICAgIGVkdWNhdGlvbiA9IHRyaW13cyhlZHVjYXRpb24pLA0KICAgIGdlbmRlciA9IHRyaW13cyhnZW5kZXIpLA0KICAgIGxlZWZ0aWpkID0gdHJpbXdzKGxlZWZ0aWpkKQ0KICApDQoNCk5FQTIwMjIkZ2VuZGVyIDwtIGZhY3RvcihORUEyMDIyJGdlbmRlciwgbGV2ZWxzID0gYygibSIsICJ2IikpDQpORUEyMDIyJG1pZ3JhdGlvbiA8LSBmYWN0b3IoTkVBMjAyMiRtaWdyYXRpb24sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxzID0gYygibmwiLCAiZXUiLCAibm9ldSIpKQ0KTkVBMjAyMiRlZHVjYXRpb24gPC0gZmFjdG9yKE5FQTIwMjIkZWR1Y2F0aW9uLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVscyA9IGMoImxhYWciLCAibWlkZGVsIiwgImhvb2ciKSkNCk5FQTIwMjIkbGVlZnRpamQgPC0gZmFjdG9yKE5FQTIwMjIkbGVlZnRpamQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxzID0gYygiMTUuMzUiLCAiMzUuNTUiLCAiNTUuNzUiKSkNCmBgYA0KDQoNCjxicj48YnI+DQoNCg0KIyBPdmVyYWxsIHVuc2FmZXR5IChjbGFzcyA2KQ0KDQoNCjxicj48YnI+DQoNCg0KYGBge3IgcmVncmVzc2lvbiBvdmVyYWxsIHVuc2FmZXR5LCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUocG1vZGVsN19lbXB2NiA9IHBtb2RlbDdfZW1wdjYpDQoNCk5FQTIwMjIkcG1vZGVsN19lbXB2Nl9UIDwtIChORUEyMDIyJHBtb2RlbDdfZW1wdjYgKiAoMjk5MjMgLSAxKSArIDAuNSkgLyAyOTkyMw0KDQpmbGJfNl8wIDwtIGdsbW1UTUIocG1vZGVsN19lbXB2Nl9UIH4gMSArICgxIHwgaW50ZXJzZWN0aW9ucyksDQogICAgICAgICAgICAgICAgICBmYW1pbHkgPSBiZXRhX2ZhbWlseShsaW5rID0gImxvZ2l0IiksDQogICAgICAgICAgICAgICAgICBkYXRhID0gTkVBMjAyMikNCg0KZmxiXzZfMSA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjZfVCB+IGdlbmRlcl92ICsgbWlncmF0aW9uX2V1ICsgbWlncmF0aW9uX25vZXUgKyANCiAgICBlZHVjYXRpb25fbGFhZyArIGVkdWNhdGlvbl9taWRkZWwgKyBsZWVmdGlqZF8zNS41NSArIGxlZWZ0aWpkXzU1Ljc1ICArICgxIHwgaW50ZXJzZWN0aW9ucyksDQogICAgICAgICAgICAgICAgICBmYW1pbHkgPSBiZXRhX2ZhbWlseShsaW5rID0gImxvZ2l0IiksDQogICAgICAgICAgICAgICAgICBkYXRhID0gTkVBMjAyMikNCnN1bW1hcnkoZmxiXzZfMCkNCnN1bW1hcnkoZmxiXzZfMSkNCg0KdGlkeShmbGJfNl8xLCBlZmZlY3RzID0gImZpeGVkIiwgY29uZi5pbnQgPSBUUlVFKQ0KYGBgDQoNCg0KYGBge3IgQ2FsY3VsYXRpb24gSUNDIG92ZXJhbGwgdW5zYWZlLCBjYWNoZT1UUlVFfQ0KDQptdSA8LSBmaXR0ZWQoZmxiXzZfMCkNCnZhcl95IDwtIG11ICogKDEgLSBtdSkgLyAoMSArIDIuNzMpDQptZWFuX3Zhcl93aXRoaW4gPC0gbWVhbih2YXJfeSkNCg0KY2F0KCJSZXNpZHVhbCB2YXJpYW5jZTogIiwgbWVhbih2YXJfeSksICJcbiIsDQogICAgIklDQyBtb2RlbCAwOiAiLCAwLjAwMDg5NzkvKDAuMDAwODk3OSswLjAxMTkwMzk3KSwgIlxuIiwNCiAgICAiSUNDIGZpbmFsOiAiLCAxLjkzOWUtMDkvKDEuOTM5ZS0wOSswLjAxMTkwMzk3KSwgIlxuIiwNCiAgICAiUENWOiAiLCAoMC4wMDA4OTc5LTEuOTM5ZS0wOSkvMC4wMDA4OTc5LCAiXG4iKQ0KYGBgDQoNCg0KYGBge3IgTW9kZWwxOiBQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgb3ZlcmFsbCB1bnNhZmV0eSwgY2FjaGU9VFJVRX0NCk5FQTIwMjIkcHJlZGljdGVkXzYgPC0gcHJlZGljdChmbGJfNl8xLCByZS5mb3JtID0gTlVMTCwgdHlwZSA9ICJyZXNwb25zZSIpDQoNCk5FQTIwMjIkcmVzaWR1YWxfNiA8LSBORUEyMDIyJHBtb2RlbDdfZW1wdjZfVCAtIE5FQTIwMjIkcHJlZGljdGVkXzYNCg0Kc3VtbWFyeV9wcmVkc182IDwtIE5FQTIwMjIgJT4lDQogIGdyb3VwX2J5KGdlbmRlciwgbWlncmF0aW9uLCBlZHVjYXRpb24sIGxlZWZ0aWpkKSAlPiUNCiAgc3VtbWFyaXNlKA0KICAgIG1lYW5fcHJlZF82ID0gbWVhbihwcmVkaWN0ZWRfNiwgbmEucm0gPSBUUlVFKSwNCiAgICBzZV9wcmVkXzYgPSBzZChyZXNpZHVhbF82LCBuYS5ybSA9IFRSVUUpIC8gc3FydChuKCkpLA0KICAgIG4gPSBuKCksDQogICAgLmdyb3VwcyA9ICJkcm9wIg0KICApDQoNCmdlbmRlcl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgIm0iID0gIk1lbiIsDQogICJ2IiA9ICJXb21lbiINCikpDQoNCm1pZ3JhdGlvbl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgIm5sIiAgID0gIk5vIG1pZ3JhdGlvbiBiYWNrZ3JvdW5kIiwNCiAgImV1IiAgID0gIkV1cm9wZWFuIiwNCiAgIm5vZXUiID0gIk5vbi1FdXJvcGVhbiINCikpDQoNCmVkdWNhdGlvbl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgImxhYWciICAgPSAiTG93IiwNCiAgIm1pZGRlbCIgPSAiTWlkZGxlIiwNCiAgImhvb2ciICAgPSAiSGlnaCINCikpDQoNCmdncGxvdChzdW1tYXJ5X3ByZWRzXzYsIGFlcyh4ID0gbGVlZnRpamQsIHkgPSBtZWFuX3ByZWRfNiwgY29sb3IgPSBnZW5kZXIpKSArDQogIGdlb21fcG9pbnQoKSArDQogIGdlb21fZXJyb3JiYXIoYWVzKHltaW4gPSBtZWFuX3ByZWRfNiAtIHNlX3ByZWRfNiwNCiAgICAgICAgICAgICAgICAgICAgeW1heCA9IG1lYW5fcHJlZF82ICsgc2VfcHJlZF82KSwNCiAgICAgICAgICAgICAgICB3aWR0aCA9IDAsDQogICAgICAgICAgICAgICAgYWxwaGEgPSAwLjQsDQogICAgICAgICAgICAgICAgbGluZXdpZHRoID0gMC4wMDUNCiAgICAgICAgICAgICAgICApICsgDQogIGZhY2V0X2dyaWQocm93cyA9IHZhcnMoZWR1Y2F0aW9uKSwgY29scyA9IHZhcnMobWlncmF0aW9uKSwNCiAgICAgICAgICAgICBsYWJlbGxlciA9IGxhYmVsbGVyKA0KICAgICAgICAgICAgICAgZWR1Y2F0aW9uID0gZWR1Y2F0aW9uX2xhYmVscywNCiAgICAgICAgICAgICAgIG1pZ3JhdGlvbiA9IG1pZ3JhdGlvbl9sYWJlbHMNCiAgICAgICAgICAgICApLA0KICAgICAgICAgICAgIHN3aXRjaCA9ICJ5Ig0KICApICsNCiAgbGFicygNCiAgICB0aXRsZSA9ICJQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgb3ZlcmFsbCB1bnNhZmV0eSBNb2RlbDEiLA0KICAgIHkgPSBOVUxMLA0KICAgIHggPSBOVUxMLA0KICAgIGNvbG9yID0gIkdlbmRlciINCiAgKSArDQogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXMgPSBjKCJtIiA9ICJzdGVlbGJsdWUiLCAidiIgPSAidG9tYXRvIiksDQogICAgICAgICAgICAgICAgICAgICBsYWJlbHMgPSBnZW5kZXJfbGFiZWxzKSArDQogIHRoZW1lX21pbmltYWwoKSArDQogIHRoZW1lKA0KICAgIGF4aXMudGl0bGUueS5yaWdodCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDkwKSwNCiAgICBzdHJpcC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiZ3JheTkwIiwgY29sb3IgPSBOQSksDQogICAgc3RyaXAucGxhY2VtZW50ID0gIm91dHNpZGUiLA0KICAgIHN0cmlwLnRleHQueS5sZWZ0ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gMCksDQogICAgYXhpcy50aXRsZS55ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIGF4aXMudGV4dC55LmxlZnQgPSBlbGVtZW50X2JsYW5rKCksDQogICAgYXhpcy50aWNrcy55LmxlZnQgPSBlbGVtZW50X2JsYW5rKCksDQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMTAsIDMwLCAxMCwgMTApDQogICkgKw0KICBzY2FsZV95X2NvbnRpbnVvdXMoDQogICAgbmFtZSA9IE5VTEwsDQogICAgc2VjLmF4aXMgPSBkdXBfYXhpcyhuYW1lID0gIlByZWRpY3RlZCBQcm9iYWJpbGl0eSIpDQogICkNCmBgYA0KDQoNCmBgYHtyIHRvcC9ib3R0b20gMTAgb3ZlcmFsbCB1bnNhZmV0eSwgY2FjaGU9VFJVRX0NCnByZWRfZGZfNiA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUoDQogICAgcHJlZF82ID0gcHJlZGljdChmbGJfNl8xLCB0eXBlID0gInJlc3BvbnNlIiwgc2UuZml0ID0gVFJVRSkkZml0LA0KICAgIHNlX3ByZWRfNiA9IHByZWRpY3QoZmxiXzZfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJHNlLmZpdA0KICApICU+JQ0KICBncm91cF9ieShpbnRlcnNlY3Rpb25zKSAlPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByZWRfbWVhbl82ID0gbWVhbihwcmVkXzYsIG5hLnJtID0gVFJVRSksIA0KICAgIHNlX21lYW5fNiA9IG1lYW4oc2VfcHJlZF82LCBuYS5ybSA9IFRSVUUpDQogICkgJT4lDQogIHVuZ3JvdXAoKQ0KDQpwcmVkX2RmXzYgPC0gcHJlZF9kZl82ICU+JQ0KICBtdXRhdGUoDQogICAgbG93ZXJfQ0kgPSBwcmVkX21lYW5fNiAtIDEuOTYgKiBzZV9tZWFuXzYsDQogICAgdXBwZXJfQ0kgPSBwcmVkX21lYW5fNiArIDEuOTYgKiBzZV9tZWFuXzYNCiAgKQ0KDQoNCmxpc3RfNiA8LSBwcmVkX2RmXzYgJT4lDQogIGFycmFuZ2UoZGVzYyhwcmVkX21lYW5fNikpICU+JQ0KICBtdXRhdGUocmFuayA9IHJvd19udW1iZXIoKSkNCg0KdG9wMTBfNiA8LSBsaXN0XzYgJT4lIHNsaWNlKDE6MTApDQpib3R0b20xMF82IDwtIGxpc3RfNiAlPiUgc2xpY2UoKG4oKSAtIDkpOm4oKSkNCg0KDQpsaXN0XzYgPC0gYmluZF9yb3dzKA0KICB0b3AxMF82ICU+JSBtdXRhdGUodHlwZSA9ICJUb3AgMTAiKSwNCiAgYm90dG9tMTBfNiAlPiUgbXV0YXRlKHR5cGUgPSAiQm90dG9tIDEwIikNCikNCg0KcHJpbnQobGlzdF82KQ0KDQpgYGANCg0KPGJyPjxicj4NCg0KIyBTdXBlcnZpc29yIHVuc2FmZXR5IChDbGFzcyA0KQ0KDQo8YnI+PGJyPg0KDQoNCmBgYHtyIHJlZ3Jlc3Npb24gc3VwZXJ2aXNvciB1bnNhZmV0eSwgY2FjaGU9VFJVRX0NCk5FQTIwMjIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKHBtb2RlbDdfZW1wdjQgPSBwbW9kZWw3X2VtcHY0KQ0KDQpORUEyMDIyJHBtb2RlbDdfZW1wdjRfVCA8LSAoTkVBMjAyMiRwbW9kZWw3X2VtcHY0ICogKDI5OTIzIC0gMSkgKyAwLjUpIC8gMjk5MjMNCg0KZmxiXzRfMCA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjRfVCB+IDEgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQoNCmZsYl80XzEgPC0gZ2xtbVRNQihwbW9kZWw3X2VtcHY0X1QgfiBnZW5kZXJfdiArIG1pZ3JhdGlvbl9ldSArIG1pZ3JhdGlvbl9ub2V1ICsgDQogICAgZWR1Y2F0aW9uX2xhYWcgKyBlZHVjYXRpb25fbWlkZGVsICsgbGVlZnRpamRfMzUuNTUgKyBsZWVmdGlqZF81NS43NSAgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQpzdW1tYXJ5KGZsYl80XzApDQpzdW1tYXJ5KGZsYl80XzEpDQp0aWR5KGZsYl80XzEsIGVmZmVjdHMgPSAiZml4ZWQiLCBjb25mLmludCA9IFRSVUUpDQpgYGANCg0KDQpgYGB7ciBDYWxjdWxhdGlvbiBJQ0MsIGNhY2hlPVRSVUV9DQoNCm11IDwtIGZpdHRlZChmbGJfNF8wKQ0KdmFyX3kgPC0gbXUgKiAoMSAtIG11KSAvICgxICsgMy4wNCkNCm1lYW5fdmFyX3dpdGhpbiA8LSBtZWFuKHZhcl95KQ0KDQpjYXQoIlJlc2lkdWFsIHZhcmlhbmNlOiAiLCBtZWFuKHZhcl95KSwgIlxuIiwNCiAgICAiSUNDIG1vZGVsIDA6ICIsIDAuMDAwMjI2MS8oMC4wMDAyMjYxKzAuMDExMzA0ODcpLCAiXG4iLA0KICAgICJJQ0MgZmluYWw6ICIsIDEuOTE4ZS0wOS8oMS45MThlLTA5KzAuMDExMzA0ODcpLCAiXG4iLA0KICAgICJQQ1Y6ICIsICgwLjAwMDIyNjEtMS45MThlLTA5KS8wLjAwMDIyNjEsICJcbiIpDQpgYGANCg0KDQpgYGB7ciBNb2RlbDE6IFByZWRpY3RlZCBwcm9iYWJpbGl0eSBzdXBlcnZpc29yIHVuc2FmZXR5LCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiRwcmVkaWN0ZWRfNCA8LSBwcmVkaWN0KGZsYl80XzEsIHJlLmZvcm0gPSBOVUxMLCB0eXBlID0gInJlc3BvbnNlIikNCg0KTkVBMjAyMiRyZXNpZHVhbF80IDwtIE5FQTIwMjIkcG1vZGVsN19lbXB2NF9UIC0gTkVBMjAyMiRwcmVkaWN0ZWRfNA0KDQpzdW1tYXJ5X3ByZWRzXzQgPC0gTkVBMjAyMiAlPiUNCiAgZ3JvdXBfYnkoZ2VuZGVyLCBtaWdyYXRpb24sIGVkdWNhdGlvbiwgbGVlZnRpamQpICU+JQ0KICBzdW1tYXJpc2UoDQogICAgbWVhbl9wcmVkXzQgPSBtZWFuKHByZWRpY3RlZF80LCBuYS5ybSA9IFRSVUUpLA0KICAgIHNlX3ByZWRfNCA9IHNkKHJlc2lkdWFsXzQsIG5hLnJtID0gVFJVRSkgLyBzcXJ0KG4oKSksDQogICAgbiA9IG4oKSwNCiAgICAuZ3JvdXBzID0gImRyb3AiDQogICkNCg0KZ2VuZGVyX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibSIgPSAiTWVuIiwNCiAgInYiID0gIldvbWVuIg0KKSkNCg0KbWlncmF0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibmwiICAgPSAiTm8gbWlncmF0aW9uIGJhY2tncm91bmQiLA0KICAiZXUiICAgPSAiRXVyb3BlYW4iLA0KICAibm9ldSIgPSAiTm9uLUV1cm9wZWFuIg0KKSkNCg0KZWR1Y2F0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibGFhZyIgICA9ICJMb3ciLA0KICAibWlkZGVsIiA9ICJNaWRkbGUiLA0KICAiaG9vZyIgICA9ICJIaWdoIg0KKSkNCg0KZ2dwbG90KHN1bW1hcnlfcHJlZHNfNCwgYWVzKHggPSBsZWVmdGlqZCwgeSA9IG1lYW5fcHJlZF80LCBjb2xvciA9IGdlbmRlcikpICsNCiAgZ2VvbV9wb2ludCgpICsNCiAgZ2VvbV9lcnJvcmJhcihhZXMoeW1pbiA9IG1lYW5fcHJlZF80IC0gc2VfcHJlZF80LA0KICAgICAgICAgICAgICAgICAgICB5bWF4ID0gbWVhbl9wcmVkXzQgKyBzZV9wcmVkXzQpLA0KICAgICAgICAgICAgICAgIHdpZHRoID0gMCwNCiAgICAgICAgICAgICAgICBhbHBoYSA9IDAuNCwNCiAgICAgICAgICAgICAgICBsaW5ld2lkdGggPSAwLjAwNQ0KICAgICAgICAgICAgICAgICkgKyANCiAgZmFjZXRfZ3JpZChyb3dzID0gdmFycyhlZHVjYXRpb24pLCBjb2xzID0gdmFycyhtaWdyYXRpb24pLA0KICAgICAgICAgICAgIGxhYmVsbGVyID0gbGFiZWxsZXIoDQogICAgICAgICAgICAgICBlZHVjYXRpb24gPSBlZHVjYXRpb25fbGFiZWxzLA0KICAgICAgICAgICAgICAgbWlncmF0aW9uID0gbWlncmF0aW9uX2xhYmVscw0KICAgICAgICAgICAgICksDQogICAgICAgICAgICAgc3dpdGNoID0gInkiDQogICkgKw0KICBsYWJzKA0KICAgIHRpdGxlID0gIlByZWRpY3RlZCBwcm9iYWJpbGl0eSBvdmVyYWxsIHVuc2FmZXR5IE1vZGVsMSIsDQogICAgeSA9IE5VTEwsDQogICAgeCA9IE5VTEwsDQogICAgY29sb3IgPSAiR2VuZGVyIg0KICApICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoIm0iID0gInN0ZWVsYmx1ZSIsICJ2IiA9ICJ0b21hdG8iKSwNCiAgICAgICAgICAgICAgICAgICAgIGxhYmVscyA9IGdlbmRlcl9sYWJlbHMpICsNCiAgdGhlbWVfbWluaW1hbCgpICsNCiAgdGhlbWUoDQogICAgYXhpcy50aXRsZS55LnJpZ2h0ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTApLA0KICAgIHN0cmlwLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICJncmF5OTAiLCBjb2xvciA9IE5BKSwNCiAgICBzdHJpcC5wbGFjZW1lbnQgPSAib3V0c2lkZSIsDQogICAgc3RyaXAudGV4dC55LmxlZnQgPSBlbGVtZW50X3RleHQoYW5nbGUgPSAwKSwNCiAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X2JsYW5rKCksDQogICAgYXhpcy50ZXh0LnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBheGlzLnRpY2tzLnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigxMCwgMzAsIDEwLCAxMCkNCiAgKSArDQogIHNjYWxlX3lfY29udGludW91cygNCiAgICBuYW1lID0gTlVMTCwNCiAgICBzZWMuYXhpcyA9IGR1cF9heGlzKG5hbWUgPSAiUHJlZGljdGVkIFByb2JhYmlsaXR5IikNCiAgKQ0KYGBgDQoNCg0KYGBge3IgdG9wL2JvdHRvbSAxMCBzdXBlcnZpc29yIHVuc2FmZXR5LCBjYWNoZT1UUlVFfQ0KcHJlZF9kZl80IDwtIE5FQTIwMjIgJT4lDQogIG11dGF0ZSgNCiAgICBwcmVkXzQgPSBwcmVkaWN0KGZsYl80XzEsIHR5cGUgPSAicmVzcG9uc2UiLCBzZS5maXQgPSBUUlVFKSRmaXQsDQogICAgc2VfcHJlZF80ID0gcHJlZGljdChmbGJfNF8xLCB0eXBlID0gInJlc3BvbnNlIiwgc2UuZml0ID0gVFJVRSkkc2UuZml0DQogICkgJT4lDQogIGdyb3VwX2J5KGludGVyc2VjdGlvbnMpICU+JQ0KICBzdW1tYXJpc2UoDQogICAgcHJlZF9tZWFuXzQgPSBtZWFuKHByZWRfNCwgbmEucm0gPSBUUlVFKSwgDQogICAgc2VfbWVhbl80ID0gbWVhbihzZV9wcmVkXzQsIG5hLnJtID0gVFJVRSkNCiAgKSAlPiUNCiAgdW5ncm91cCgpDQoNCnByZWRfZGZfNCA8LSBwcmVkX2RmXzQgJT4lDQogIG11dGF0ZSgNCiAgICBsb3dlcl9DSSA9IHByZWRfbWVhbl80IC0gMS45NiAqIHNlX21lYW5fNCwNCiAgICB1cHBlcl9DSSA9IHByZWRfbWVhbl80ICsgMS45NiAqIHNlX21lYW5fNA0KICApDQoNCg0KbGlzdF80IDwtIHByZWRfZGZfNCAlPiUNCiAgYXJyYW5nZShkZXNjKHByZWRfbWVhbl80KSkgJT4lDQogIG11dGF0ZShyYW5rID0gcm93X251bWJlcigpKQ0KDQp0b3AxMF80IDwtIGxpc3RfNCAlPiUgc2xpY2UoMToxMCkNCmJvdHRvbTEwXzQgPC0gbGlzdF80ICU+JSBzbGljZSgobigpIC0gOSk6bigpKQ0KDQoNCmxpc3RfNCA8LSBiaW5kX3Jvd3MoDQogIHRvcDEwXzQgJT4lIG11dGF0ZSh0eXBlID0gIlRvcCAxMCIpLA0KICBib3R0b20xMF80ICU+JSBtdXRhdGUodHlwZSA9ICJCb3R0b20gMTAiKQ0KKQ0KDQpwcmludChsaXN0XzQpDQoNCmBgYA0KDQo8YnI+PGJyPg0KDQojIENvd29ya2VyIHVuc2FmZXR5IChDbGFzcyA3KQ0KDQo8YnI+PGJyPg0KDQpgYGB7ciByZWdyZXNzaW9uIGNvd29ya2VyIHVuc2FmZXR5LCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUocG1vZGVsN19lbXB2NyA9IHBtb2RlbDdfZW1wdjcpDQoNCk5FQTIwMjIkcG1vZGVsN19lbXB2N19UIDwtIChORUEyMDIyJHBtb2RlbDdfZW1wdjcgKiAoMjk5MjMgLSAxKSArIDAuNSkgLyAyOTkyMw0KDQoNCmZsYl83XzAgPC0gZ2xtbVRNQihwbW9kZWw3X2VtcHY3X1QgfiAxICsgKDEgfCBpbnRlcnNlY3Rpb25zKSwNCiAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJldGFfZmFtaWx5KGxpbmsgPSAibG9naXQiKSwNCiAgICAgICAgICAgICAgICAgIGRhdGEgPSBORUEyMDIyKQ0KDQpmbGJfN18xIDwtIGdsbW1UTUIocG1vZGVsN19lbXB2N19UIH4gZ2VuZGVyX3YgKyBtaWdyYXRpb25fZXUgKyBtaWdyYXRpb25fbm9ldSArIA0KICAgIGVkdWNhdGlvbl9sYWFnICsgZWR1Y2F0aW9uX21pZGRlbCArIGxlZWZ0aWpkXzM1LjU1ICsgbGVlZnRpamRfNTUuNzUgICsgKDEgfCBpbnRlcnNlY3Rpb25zKSwNCiAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJldGFfZmFtaWx5KGxpbmsgPSAibG9naXQiKSwNCiAgICAgICAgICAgICAgICAgIGRhdGEgPSBORUEyMDIyKQ0Kc3VtbWFyeShmbGJfN18wKQ0Kc3VtbWFyeShmbGJfN18xKQ0KdGlkeShmbGJfN18xLCBlZmZlY3RzID0gImZpeGVkIiwgY29uZi5pbnQgPSBUUlVFKQ0KYGBgDQoNCg0KYGBge3IgQ2FsY3VsYXRpb24gSUNDIGNvd29ya2VyIHVuc2FmZXR5LCBjYWNoZT1UUlVFfQ0KDQptdSA8LSBmaXR0ZWQoZmxiXzdfMCkNCnZhcl95IDwtIG11ICogKDEgLSBtdSkgLyAoMSArIDMuMTkpDQptZWFuX3Zhcl93aXRoaW4gPC0gbWVhbih2YXJfeSkNCg0KY2F0KCJSZXNpZHVhbCB2YXJpYW5jZTogIiwgbWVhbih2YXJfeSksICJcbiIsDQogICAgIklDQyBtb2RlbCAwOiAiLCA5LjMzN2UtMDUvKDkuMzM3ZS0wNSswLjAxNjQxNjkzKSwgIlxuIiwNCiAgICAiSUNDIGZpbmFsOiAiLCAxLjA4M2UtMDkvKDEuMDgzZS0wOSswLjAxNjQxNzYzKSwgIlxuIiwNCiAgICAiUENWOiAiLCAoOS4zMzdlLTA1LTEuMDgzZS0wOSkvOS4zMzdlLTA1LCAiXG4iKQ0KYGBgDQoNCg0KYGBge3IgTW9kZWwxOiBQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgY293b3JrZXIgdW5zYWZldHksIGNhY2hlPVRSVUV9DQpORUEyMDIyJHByZWRpY3RlZF83IDwtIHByZWRpY3QoZmxiXzdfMSwgcmUuZm9ybSA9IE5VTEwsIHR5cGUgPSAicmVzcG9uc2UiKQ0KDQpORUEyMDIyJHJlc2lkdWFsXzcgPC0gTkVBMjAyMiRwbW9kZWw3X2VtcHY3X1QgLSBORUEyMDIyJHByZWRpY3RlZF83DQoNCnN1bW1hcnlfcHJlZHNfNyA8LSBORUEyMDIyICU+JQ0KICBncm91cF9ieShnZW5kZXIsIG1pZ3JhdGlvbiwgZWR1Y2F0aW9uLCBsZWVmdGlqZCkgJT4lDQogIHN1bW1hcmlzZSgNCiAgICBtZWFuX3ByZWRfNyA9IG1lYW4ocHJlZGljdGVkXzcsIG5hLnJtID0gVFJVRSksDQogICAgc2VfcHJlZF83ID0gc2QocmVzaWR1YWxfNywgbmEucm0gPSBUUlVFKSAvIHNxcnQobigpKSwNCiAgICBuID0gbigpLA0KICAgIC5ncm91cHMgPSAiZHJvcCINCiAgKQ0KDQpnZW5kZXJfbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJtIiA9ICJNZW4iLA0KICAidiIgPSAiV29tZW4iDQopKQ0KDQptaWdyYXRpb25fbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJubCIgICA9ICJObyBtaWdyYXRpb24gYmFja2dyb3VuZCIsDQogICJldSIgICA9ICJFdXJvcGVhbiIsDQogICJub2V1IiA9ICJOb24tRXVyb3BlYW4iDQopKQ0KDQplZHVjYXRpb25fbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJsYWFnIiAgID0gIkxvdyIsDQogICJtaWRkZWwiID0gIk1pZGRsZSIsDQogICJob29nIiAgID0gIkhpZ2giDQopKQ0KDQpnZ3Bsb3Qoc3VtbWFyeV9wcmVkc183LCBhZXMoeCA9IGxlZWZ0aWpkLCB5ID0gbWVhbl9wcmVkXzcsIGNvbG9yID0gZ2VuZGVyKSkgKw0KICBnZW9tX3BvaW50KCkgKw0KICBnZW9tX2Vycm9yYmFyKGFlcyh5bWluID0gbWVhbl9wcmVkXzcgLSBzZV9wcmVkXzcsDQogICAgICAgICAgICAgICAgICAgIHltYXggPSBtZWFuX3ByZWRfNyArIHNlX3ByZWRfNyksDQogICAgICAgICAgICAgICAgd2lkdGggPSAwLA0KICAgICAgICAgICAgICAgIGFscGhhID0gMC40LA0KICAgICAgICAgICAgICAgIGxpbmV3aWR0aCA9IDAuMDA1DQogICAgICAgICAgICAgICAgKSArIA0KICBmYWNldF9ncmlkKHJvd3MgPSB2YXJzKGVkdWNhdGlvbiksIGNvbHMgPSB2YXJzKG1pZ3JhdGlvbiksDQogICAgICAgICAgICAgbGFiZWxsZXIgPSBsYWJlbGxlcigNCiAgICAgICAgICAgICAgIGVkdWNhdGlvbiA9IGVkdWNhdGlvbl9sYWJlbHMsDQogICAgICAgICAgICAgICBtaWdyYXRpb24gPSBtaWdyYXRpb25fbGFiZWxzDQogICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICBzd2l0Y2ggPSAieSINCiAgKSArDQogIGxhYnMoDQogICAgdGl0bGUgPSAiUHJlZGljdGVkIHByb2JhYmlsaXR5IGNvd29ya2VyIHVuc2FmZXR5IE1vZGVsMSIsDQogICAgeSA9IE5VTEwsDQogICAgeCA9IE5VTEwsDQogICAgY29sb3IgPSAiR2VuZGVyIg0KICApICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoIm0iID0gInN0ZWVsYmx1ZSIsICJ2IiA9ICJ0b21hdG8iKSwNCiAgICAgICAgICAgICAgICAgICAgIGxhYmVscyA9IGdlbmRlcl9sYWJlbHMpICsNCiAgdGhlbWVfbWluaW1hbCgpICsNCiAgdGhlbWUoDQogICAgYXhpcy50aXRsZS55LnJpZ2h0ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTApLA0KICAgIHN0cmlwLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICJncmF5OTAiLCBjb2xvciA9IE5BKSwNCiAgICBzdHJpcC5wbGFjZW1lbnQgPSAib3V0c2lkZSIsDQogICAgc3RyaXAudGV4dC55LmxlZnQgPSBlbGVtZW50X3RleHQoYW5nbGUgPSAwKSwNCiAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X2JsYW5rKCksDQogICAgYXhpcy50ZXh0LnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBheGlzLnRpY2tzLnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigxMCwgMzAsIDEwLCAxMCkNCiAgKSArDQogIHNjYWxlX3lfY29udGludW91cygNCiAgICBuYW1lID0gTlVMTCwNCiAgICBzZWMuYXhpcyA9IGR1cF9heGlzKG5hbWUgPSAiUHJlZGljdGVkIFByb2JhYmlsaXR5IikNCiAgKQ0KYGBgDQoNCmBgYHtyIHRvcC9ib3R0b20gMTAgY293b3JrZXIgdW5zYWZldHksIGNhY2hlPVRSVUV9DQpwcmVkX2RmXzcgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKA0KICAgIHByZWRfNyA9IHByZWRpY3QoZmxiXzdfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJGZpdCwNCiAgICBzZV9wcmVkXzcgPSBwcmVkaWN0KGZsYl83XzEsIHR5cGUgPSAicmVzcG9uc2UiLCBzZS5maXQgPSBUUlVFKSRzZS5maXQNCiAgKSAlPiUNCiAgZ3JvdXBfYnkoaW50ZXJzZWN0aW9ucykgJT4lDQogIHN1bW1hcmlzZSgNCiAgICBwcmVkX21lYW5fNyA9IG1lYW4ocHJlZF83LCBuYS5ybSA9IFRSVUUpLCANCiAgICBzZV9tZWFuXzcgPSBtZWFuKHNlX3ByZWRfNywgbmEucm0gPSBUUlVFKQ0KICApICU+JQ0KICB1bmdyb3VwKCkNCg0KcHJlZF9kZl83IDwtIHByZWRfZGZfNyAlPiUNCiAgbXV0YXRlKA0KICAgIGxvd2VyX0NJID0gcHJlZF9tZWFuXzcgLSAxLjk2ICogc2VfbWVhbl83LA0KICAgIHVwcGVyX0NJID0gcHJlZF9tZWFuXzcgKyAxLjk2ICogc2VfbWVhbl83DQogICkNCg0KDQpsaXN0XzcgPC0gcHJlZF9kZl83ICU+JQ0KICBhcnJhbmdlKGRlc2MocHJlZF9tZWFuXzcpKSAlPiUNCiAgbXV0YXRlKHJhbmsgPSByb3dfbnVtYmVyKCkpDQoNCnRvcDEwXzcgPC0gbGlzdF83ICU+JSBzbGljZSgxOjEwKQ0KYm90dG9tMTBfNyA8LSBsaXN0XzcgJT4lIHNsaWNlKChuKCkgLSA5KTpuKCkpDQoNCg0KbGlzdF83IDwtIGJpbmRfcm93cygNCiAgdG9wMTBfNyAlPiUgbXV0YXRlKHR5cGUgPSAiVG9wIDEwIiksDQogIGJvdHRvbTEwXzcgJT4lIG11dGF0ZSh0eXBlID0gIkJvdHRvbSAxMCIpDQopDQoNCnByaW50KGxpc3RfNykNCg0KYGBgDQoNCjxicj48YnI+DQoNCiMgVW5zYWZlIHNvY2lhbCBjbGltYXRlIChDbGFzcyA1KQ0KDQo8YnI+PGJyPg0KDQpgYGB7ciByZWdyZXNzaW9uIHVuc2FmZSBzb2NpYWwgY2xpbWF0ZSwgY2FjaGU9VFJVRX0NCk5FQTIwMjIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKHBtb2RlbDdfZW1wdjUgPSBwbW9kZWw3X2VtcHY1KQ0KDQpORUEyMDIyJHBtb2RlbDdfZW1wdjVfVCA8LSAoTkVBMjAyMiRwbW9kZWw3X2VtcHY1ICogKDI5OTIzIC0gMSkgKyAwLjUpIC8gMjk5MjMNCg0KZmxiXzVfMCA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjVfVCB+IDEgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQoNCmZsYl81XzEgPC0gZ2xtbVRNQihwbW9kZWw3X2VtcHY1X1QgfiBnZW5kZXJfdiArIG1pZ3JhdGlvbl9ldSArIG1pZ3JhdGlvbl9ub2V1ICsgDQogICAgZWR1Y2F0aW9uX2xhYWcgKyBlZHVjYXRpb25fbWlkZGVsICsgbGVlZnRpamRfMzUuNTUgKyBsZWVmdGlqZF81NS43NSAgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQpzdW1tYXJ5KGZsYl81XzApDQpzdW1tYXJ5KGZsYl81XzEpDQp0aWR5KGZsYl81XzEsIGVmZmVjdHMgPSAiZml4ZWQiLCBjb25mLmludCA9IFRSVUUpDQpgYGANCg0KDQpgYGB7ciBDYWxjdWxhdGlvbiBJQ0MgdW5zYWZlIHNvY2lhbCBjbGltYXRlLCBjYWNoZT1UUlVFfQ0KDQptdSA8LSBmaXR0ZWQoZmxiXzVfMCkNCnZhcl95IDwtIG11ICogKDEgLSBtdSkgLyAoMSArIDEuMzUpDQptZWFuX3Zhcl93aXRoaW4gPC0gbWVhbih2YXJfeSkNCg0KY2F0KCJSZXNpZHVhbCB2YXJpYW5jZTogIiwgbWVhbih2YXJfeSksICJcbiIsDQogICAgIklDQyBtb2RlbCAwOiAiLCAwLjAwMjQyNi8oMC4wMDI0MjYrMC4wNTQ3MTEzKSwgIlxuIiwNCiAgICAiSUNDIGZpbmFsOiAiLCAzLjI1OWUtMDkvKDMuMjU5ZS0wOSswLjA1NDcxMTMyKSwgIlxuIiwNCiAgICAiUENWOiAiLCAoMC4wMDI0MjYgLSAzLjI1OWUtMDkpLzAuMDAyNDI2LCAiXG4iKQ0KYGBgDQoNCg0KYGBge3IgTW9kZWwxOiBQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgdW5zYWZlIHNvY2lhbCBjbGltYXRlLCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiRwcmVkaWN0ZWRfNSA8LSBwcmVkaWN0KGZsYl81XzAsIHJlLmZvcm0gPSBOVUxMLCB0eXBlID0gInJlc3BvbnNlIikNCg0KTkVBMjAyMiRyZXNpZHVhbF81IDwtIE5FQTIwMjIkcG1vZGVsN19lbXB2NV9UIC0gTkVBMjAyMiRwcmVkaWN0ZWRfNQ0KDQpzdW1tYXJ5X3ByZWRzXzUgPC0gTkVBMjAyMiAlPiUNCiAgZ3JvdXBfYnkoZ2VuZGVyLCBtaWdyYXRpb24sIGVkdWNhdGlvbiwgbGVlZnRpamQpICU+JQ0KICBzdW1tYXJpc2UoDQogICAgbWVhbl9wcmVkXzUgPSBtZWFuKHByZWRpY3RlZF81LCBuYS5ybSA9IFRSVUUpLA0KICAgIHNlX3ByZWRfNSA9IHNkKHJlc2lkdWFsXzUsIG5hLnJtID0gVFJVRSkgLyBzcXJ0KG4oKSksDQogICAgbiA9IG4oKSwNCiAgICAuZ3JvdXBzID0gImRyb3AiDQogICkNCg0KZ2VuZGVyX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibSIgPSAiTWVuIiwNCiAgInYiID0gIldvbWVuIg0KKSkNCg0KbWlncmF0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibmwiICAgPSAiTm8gbWlncmF0aW9uIGJhY2tncm91bmQiLA0KICAiZXUiICAgPSAiRXVyb3BlYW4iLA0KICAibm9ldSIgPSAiTm9uLUV1cm9wZWFuIg0KKSkNCg0KZWR1Y2F0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibGFhZyIgICA9ICJMb3ciLA0KICAibWlkZGVsIiA9ICJNaWRkbGUiLA0KICAiaG9vZyIgICA9ICJIaWdoIg0KKSkNCg0KZ2dwbG90KHN1bW1hcnlfcHJlZHNfNSwgYWVzKHggPSBsZWVmdGlqZCwgeSA9IG1lYW5fcHJlZF81LCBjb2xvciA9IGdlbmRlcikpICsNCiAgZ2VvbV9wb2ludCgpICsNCiAgZ2VvbV9lcnJvcmJhcihhZXMoeW1pbiA9IG1lYW5fcHJlZF81IC0gc2VfcHJlZF81LA0KICAgICAgICAgICAgICAgICAgICB5bWF4ID0gbWVhbl9wcmVkXzUgKyBzZV9wcmVkXzUpLA0KICAgICAgICAgICAgICAgIHdpZHRoID0gMCwNCiAgICAgICAgICAgICAgICBhbHBoYSA9IDAuNCwNCiAgICAgICAgICAgICAgICBsaW5ld2lkdGggPSAwLjAwNQ0KICAgICAgICAgICAgICAgICkgKyANCiAgZmFjZXRfZ3JpZChyb3dzID0gdmFycyhlZHVjYXRpb24pLCBjb2xzID0gdmFycyhtaWdyYXRpb24pLA0KICAgICAgICAgICAgIGxhYmVsbGVyID0gbGFiZWxsZXIoDQogICAgICAgICAgICAgICBlZHVjYXRpb24gPSBlZHVjYXRpb25fbGFiZWxzLA0KICAgICAgICAgICAgICAgbWlncmF0aW9uID0gbWlncmF0aW9uX2xhYmVscw0KICAgICAgICAgICAgICksDQogICAgICAgICAgICAgc3dpdGNoID0gInkiDQogICkgKw0KICBsYWJzKA0KICAgIHRpdGxlID0gIlByZWRpY3RlZCBwcm9iYWJpbGl0eSB1bnNhZmUgc29jaWFsIGNsaW1hdGUgTW9kZWwxIiwNCiAgICB5ID0gTlVMTCwNCiAgICB4ID0gTlVMTCwNCiAgICBjb2xvciA9ICJHZW5kZXIiDQogICkgKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygibSIgPSAic3RlZWxibHVlIiwgInYiID0gInRvbWF0byIpLA0KICAgICAgICAgICAgICAgICAgICAgbGFiZWxzID0gZ2VuZGVyX2xhYmVscykgKw0KICB0aGVtZV9taW5pbWFsKCkgKw0KICB0aGVtZSgNCiAgICBheGlzLnRpdGxlLnkucmlnaHQgPSBlbGVtZW50X3RleHQoYW5nbGUgPSA5MCksDQogICAgc3RyaXAuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gImdyYXk5MCIsIGNvbG9yID0gTkEpLA0KICAgIHN0cmlwLnBsYWNlbWVudCA9ICJvdXRzaWRlIiwNCiAgICBzdHJpcC50ZXh0LnkubGVmdCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDApLA0KICAgIGF4aXMudGl0bGUueSA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBheGlzLnRleHQueS5sZWZ0ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIGF4aXMudGlja3MueS5sZWZ0ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIHBsb3QubWFyZ2luID0gbWFyZ2luKDEwLCAzMCwgMTAsIDEwKQ0KICApICsNCiAgc2NhbGVfeV9jb250aW51b3VzKA0KICAgIG5hbWUgPSBOVUxMLA0KICAgIHNlYy5heGlzID0gZHVwX2F4aXMobmFtZSA9ICJQcmVkaWN0ZWQgUHJvYmFiaWxpdHkiKQ0KICApDQpgYGANCg0KYGBge3IgdG9wL2JvdHRvbSAxMCB1bnNhZmUgc29jaWFsIGNsaW1hdGUsIGNhY2hlPVRSVUV9DQpwcmVkX2RmXzUgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKA0KICAgIHByZWRfNSA9IHByZWRpY3QoZmxiXzVfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJGZpdCwNCiAgICBzZV9wcmVkXzUgPSBwcmVkaWN0KGZsYl81XzEsIHR5cGUgPSAicmVzcG9uc2UiLCBzZS5maXQgPSBUUlVFKSRzZS5maXQNCiAgKSAlPiUNCiAgZ3JvdXBfYnkoaW50ZXJzZWN0aW9ucykgJT4lDQogIHN1bW1hcmlzZSgNCiAgICBwcmVkX21lYW5fNSA9IG1lYW4ocHJlZF81LCBuYS5ybSA9IFRSVUUpLCANCiAgICBzZV9tZWFuXzUgPSBtZWFuKHNlX3ByZWRfNSwgbmEucm0gPSBUUlVFKQ0KICApICU+JQ0KICB1bmdyb3VwKCkNCg0KcHJlZF9kZl81IDwtIHByZWRfZGZfNSAlPiUNCiAgbXV0YXRlKA0KICAgIGxvd2VyX0NJID0gcHJlZF9tZWFuXzUgLSAxLjk2ICogc2VfbWVhbl81LA0KICAgIHVwcGVyX0NJID0gcHJlZF9tZWFuXzUgKyAxLjk2ICogc2VfbWVhbl81DQogICkNCg0KDQpsaXN0XzUgPC0gcHJlZF9kZl81ICU+JQ0KICBhcnJhbmdlKGRlc2MocHJlZF9tZWFuXzUpKSAlPiUNCiAgbXV0YXRlKHJhbmsgPSByb3dfbnVtYmVyKCkpDQoNCnRvcDEwXzUgPC0gbGlzdF81ICU+JSBzbGljZSgxOjEwKQ0KYm90dG9tMTBfNSA8LSBsaXN0XzUgJT4lIHNsaWNlKChuKCkgLSA5KTpuKCkpDQoNCg0KbGlzdF81IDwtIGJpbmRfcm93cygNCiAgdG9wMTBfNSAlPiUgbXV0YXRlKHR5cGUgPSAiVG9wIDEwIiksDQogIGJvdHRvbTEwXzUgJT4lIG11dGF0ZSh0eXBlID0gIkJvdHRvbSAxMCIpDQopDQoNCnByaW50KGxpc3RfNSkNCg0KYGBgDQoNCjxicj48YnI+DQoNCiMgU2hvcnQtdGVybSBjb25mbGljdCAoY2xhc3MgMSkNCg0KPGJyPjxicj4NCg0KDQpgYGB7ciBzaG9ydC10ZXJtIGNvbmZsaWN0LCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUocG1vZGVsN19lbXB2MSA9IHBtb2RlbDdfZW1wdjEpDQoNCk5FQTIwMjIkcG1vZGVsN19lbXB2MV9UIDwtIChORUEyMDIyJHBtb2RlbDdfZW1wdjEgKiAoMjk5MjMgLSAxKSArIDAuNSkgLyAyOTkyMw0KDQpmbGJfMV8wIDwtIGdsbW1UTUIocG1vZGVsN19lbXB2MV9UIH4gMSArICgxIHwgaW50ZXJzZWN0aW9ucyksDQogICAgICAgICAgICAgICAgICBmYW1pbHkgPSBiZXRhX2ZhbWlseShsaW5rID0gImxvZ2l0IiksDQogICAgICAgICAgICAgICAgICBkYXRhID0gTkVBMjAyMikNCg0KZmxiXzFfMSA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjFfVCB+IGdlbmRlcl92ICsgbWlncmF0aW9uX2V1ICsgbWlncmF0aW9uX25vZXUgKyANCiAgICBlZHVjYXRpb25fbGFhZyArIGVkdWNhdGlvbl9taWRkZWwgKyBsZWVmdGlqZF8zNS41NSArIGxlZWZ0aWpkXzU1Ljc1ICArICgxIHwgaW50ZXJzZWN0aW9ucyksDQogICAgICAgICAgICAgICAgICBmYW1pbHkgPSBiZXRhX2ZhbWlseShsaW5rID0gImxvZ2l0IiksDQogICAgICAgICAgICAgICAgICBkYXRhID0gTkVBMjAyMikNCnN1bW1hcnkoZmxiXzFfMCkNCnN1bW1hcnkoZmxiXzFfMSkNCmBgYA0KDQoNCmBgYHtyIENhbGN1bGF0aW9uIHNob3J0LXRlcm0gY29uZmxpY3QsIGNhY2hlPVRSVUV9DQoNCm11IDwtIGZpdHRlZChmbGJfMV8wKQ0KdmFyX3kgPC0gbXUgKiAoMSAtIG11KSAvICgxICsgMS41OCkNCm1lYW5fdmFyX3dpdGhpbiA8LSBtZWFuKHZhcl95KQ0KDQpjYXQoIlJlc2lkdWFsIHZhcmlhbmNlOiAiLCBtZWFuKHZhcl95KSwgIlxuIiwNCiAgICAiSUNDIG1vZGVsIDA6ICIsIDAuMDAyMTg2LygwLjAwMjE4NiswLjAzNjA1NjE2KSwgIlxuIiwNCiAgICAiSUNDIGZpbmFsOiAiLCAzLjM3N2UtMDkvKDMuMzc3ZS0wOSswLjAzNjA1NjE2KSwgIlxuIiwNCiAgICAiUENWOiAiLCAoMC4wMDIxODYgLSAzLjM3N2UtMDkpLzAuMDAyMTg2LCAiXG4iKQ0KYGBgDQoNCg0KYGBge3IgTW9kZWwxOiBQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgc2hvcnQtdGVybSBjb25mbGljdCwgY2FjaGU9VFJVRX0NCk5FQTIwMjIkcHJlZGljdGVkXzEgPC0gcHJlZGljdChmbGJfMV8wLCByZS5mb3JtID0gTlVMTCwgdHlwZSA9ICJyZXNwb25zZSIpDQoNCk5FQTIwMjIkcmVzaWR1YWxfMSA8LSBORUEyMDIyJHBtb2RlbDdfZW1wdjFfVCAtIE5FQTIwMjIkcHJlZGljdGVkXzENCg0Kc3VtbWFyeV9wcmVkc18xIDwtIE5FQTIwMjIgJT4lDQogIGdyb3VwX2J5KGdlbmRlciwgbWlncmF0aW9uLCBlZHVjYXRpb24sIGxlZWZ0aWpkKSAlPiUNCiAgc3VtbWFyaXNlKA0KICAgIG1lYW5fcHJlZF8xID0gbWVhbihwcmVkaWN0ZWRfMSwgbmEucm0gPSBUUlVFKSwNCiAgICBzZV9wcmVkXzEgPSBzZChyZXNpZHVhbF8xLCBuYS5ybSA9IFRSVUUpIC8gc3FydChuKCkpLA0KICAgIG4gPSBuKCksDQogICAgLmdyb3VwcyA9ICJkcm9wIg0KICApDQoNCmdlbmRlcl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgIm0iID0gIk1lbiIsDQogICJ2IiA9ICJXb21lbiINCikpDQoNCm1pZ3JhdGlvbl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgIm5sIiAgID0gIk5vIG1pZ3JhdGlvbiBiYWNrZ3JvdW5kIiwNCiAgImV1IiAgID0gIkV1cm9wZWFuIiwNCiAgIm5vZXUiID0gIk5vbi1FdXJvcGVhbiINCikpDQoNCmVkdWNhdGlvbl9sYWJlbHMgPC0gYXNfbGFiZWxsZXIoYygNCiAgImxhYWciICAgPSAiTG93IiwNCiAgIm1pZGRlbCIgPSAiTWlkZGxlIiwNCiAgImhvb2ciICAgPSAiSGlnaCINCikpDQoNCmdncGxvdChzdW1tYXJ5X3ByZWRzXzEsIGFlcyh4ID0gbGVlZnRpamQsIHkgPSBtZWFuX3ByZWRfMSwgY29sb3IgPSBnZW5kZXIpKSArDQogIGdlb21fcG9pbnQoKSArDQogIGdlb21fZXJyb3JiYXIoYWVzKHltaW4gPSBtZWFuX3ByZWRfMSAtIHNlX3ByZWRfMSwNCiAgICAgICAgICAgICAgICAgICAgeW1heCA9IG1lYW5fcHJlZF8xICsgc2VfcHJlZF8xKSwNCiAgICAgICAgICAgICAgICB3aWR0aCA9IDAsDQogICAgICAgICAgICAgICAgYWxwaGEgPSAwLjQsDQogICAgICAgICAgICAgICAgbGluZXdpZHRoID0gMC4wMDUNCiAgICAgICAgICAgICAgICApICsgDQogIGZhY2V0X2dyaWQocm93cyA9IHZhcnMoZWR1Y2F0aW9uKSwgY29scyA9IHZhcnMobWlncmF0aW9uKSwNCiAgICAgICAgICAgICBsYWJlbGxlciA9IGxhYmVsbGVyKA0KICAgICAgICAgICAgICAgZWR1Y2F0aW9uID0gZWR1Y2F0aW9uX2xhYmVscywNCiAgICAgICAgICAgICAgIG1pZ3JhdGlvbiA9IG1pZ3JhdGlvbl9sYWJlbHMNCiAgICAgICAgICAgICApLA0KICAgICAgICAgICAgIHN3aXRjaCA9ICJ5Ig0KICApICsNCiAgbGFicygNCiAgICB0aXRsZSA9ICJQcmVkaWN0ZWQgcHJvYmFiaWxpdHkgdW5zYWZlIHNvY2lhbCBjbGltYXRlIE1vZGVsMSIsDQogICAgeSA9IE5VTEwsDQogICAgeCA9IE5VTEwsDQogICAgY29sb3IgPSAiR2VuZGVyIg0KICApICsNCiAgc2NhbGVfY29sb3JfbWFudWFsKHZhbHVlcyA9IGMoIm0iID0gInN0ZWVsYmx1ZSIsICJ2IiA9ICJ0b21hdG8iKSwNCiAgICAgICAgICAgICAgICAgICAgIGxhYmVscyA9IGdlbmRlcl9sYWJlbHMpICsNCiAgdGhlbWVfbWluaW1hbCgpICsNCiAgdGhlbWUoDQogICAgYXhpcy50aXRsZS55LnJpZ2h0ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gOTApLA0KICAgIHN0cmlwLmJhY2tncm91bmQgPSBlbGVtZW50X3JlY3QoZmlsbCA9ICJncmF5OTAiLCBjb2xvciA9IE5BKSwNCiAgICBzdHJpcC5wbGFjZW1lbnQgPSAib3V0c2lkZSIsDQogICAgc3RyaXAudGV4dC55LmxlZnQgPSBlbGVtZW50X3RleHQoYW5nbGUgPSAwKSwNCiAgICBheGlzLnRpdGxlLnkgPSBlbGVtZW50X2JsYW5rKCksDQogICAgYXhpcy50ZXh0LnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBheGlzLnRpY2tzLnkubGVmdCA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBwbG90Lm1hcmdpbiA9IG1hcmdpbigxMCwgMzAsIDEwLCAxMCkNCiAgKSArDQogIHNjYWxlX3lfY29udGludW91cygNCiAgICBuYW1lID0gTlVMTCwNCiAgICBzZWMuYXhpcyA9IGR1cF9heGlzKG5hbWUgPSAiUHJlZGljdGVkIFByb2JhYmlsaXR5IikNCiAgKQ0KYGBgDQoNCmBgYHtyIHRvcC9ib3R0b20gMTAgc2hvcnQtdGVybSBjb25mbGljdCwgY2FjaGU9VFJVRX0NCnByZWRfZGZfMSA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUoDQogICAgcHJlZF8xID0gcHJlZGljdChmbGJfMV8xLCB0eXBlID0gInJlc3BvbnNlIiwgc2UuZml0ID0gVFJVRSkkZml0LA0KICAgIHNlX3ByZWRfMSA9IHByZWRpY3QoZmxiXzFfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJHNlLmZpdA0KICApICU+JQ0KICBncm91cF9ieShpbnRlcnNlY3Rpb25zKSAlPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByZWRfbWVhbl8xID0gbWVhbihwcmVkXzEsIG5hLnJtID0gVFJVRSksIA0KICAgIHNlX21lYW5fMSA9IG1lYW4oc2VfcHJlZF8xLCBuYS5ybSA9IFRSVUUpDQogICkgJT4lDQogIHVuZ3JvdXAoKQ0KDQpwcmVkX2RmXzEgPC0gcHJlZF9kZl8xICU+JQ0KICBtdXRhdGUoDQogICAgbG93ZXJfQ0kgPSBwcmVkX21lYW5fMSAtIDEuOTYgKiBzZV9tZWFuXzEsDQogICAgdXBwZXJfQ0kgPSBwcmVkX21lYW5fMSArIDEuOTYgKiBzZV9tZWFuXzENCiAgKQ0KDQoNCmxpc3RfMSA8LSBwcmVkX2RmXzEgJT4lDQogIGFycmFuZ2UoZGVzYyhwcmVkX21lYW5fMSkpICU+JQ0KICBtdXRhdGUocmFuayA9IHJvd19udW1iZXIoKSkNCg0KdG9wMTBfMSA8LSBsaXN0XzEgJT4lIHNsaWNlKDE6MTApDQpib3R0b20xMF8xIDwtIGxpc3RfMSAlPiUgc2xpY2UoKG4oKSAtIDkpOm4oKSkNCg0KDQpsaXN0XzEgPC0gYmluZF9yb3dzKA0KICB0b3AxMF8xICU+JSBtdXRhdGUodHlwZSA9ICJUb3AgMTAiKSwNCiAgYm90dG9tMTBfMSAlPiUgbXV0YXRlKHR5cGUgPSAiQm90dG9tIDEwIikNCikNCg0KcHJpbnQobGlzdF8xKQ0KDQpgYGANCg0KPGJyPjxicj4NCg0KIyBTYWZlIChDbGFzcyAyKQ0KDQo8YnI+PGJyPg0KDQoNCmBgYHtyIHJlZ3Jlc3Npb24gc2FmZSwgY2FjaGU9VFJVRX0NCk5FQTIwMjIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKHBtb2RlbDdfZW1wdjIgPSBwbW9kZWw3X2VtcHYyKQ0KDQpORUEyMDIyJHBtb2RlbDdfZW1wdjJfVCA8LSAoTkVBMjAyMiRwbW9kZWw3X2VtcHYyICogKDI5OTIzIC0gMSkgKyAwLjUpIC8gMjk5MjMNCg0KZmxiXzJfMCA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjJfVCB+IDEgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQoNCmZsYl8yXzEgPC0gZ2xtbVRNQihwbW9kZWw3X2VtcHYyX1QgfiBnZW5kZXJfdiArIG1pZ3JhdGlvbl9ldSArIG1pZ3JhdGlvbl9ub2V1ICsgDQogICAgZWR1Y2F0aW9uX2xhYWcgKyBlZHVjYXRpb25fbWlkZGVsICsgbGVlZnRpamRfMzUuNTUgKyBsZWVmdGlqZF81NS43NSAgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQpzdW1tYXJ5KGZsYl8yXzApDQpzdW1tYXJ5KGZsYl8yXzEpDQpgYGANCg0KDQpgYGB7ciBDYWxjdWxhdGlvbiBJQ0Mgc2FmZSwgY2FjaGU9VFJVRX0NCg0KbXUgPC0gZml0dGVkKGZsYl8yXzApDQp2YXJfeSA8LSBtdSAqICgxIC0gbXUpIC8gKDEgKyAwLjgxNykNCm1lYW5fdmFyX3dpdGhpbiA8LSBtZWFuKHZhcl95KQ0KDQpjYXQoIlJlc2lkdWFsIHZhcmlhbmNlOiAiLCBtZWFuKHZhcl95KSwgIlxuIiwNCiAgICAiSUNDIG1vZGVsIDA6ICIsIDAuMDA1MjI1LygwLjAwNTIyNSswLjEzMzA4MjYpLCAiXG4iLA0KICAgICJJQ0MgZmluYWw6ICIsIDAuMDAxOTMvKDAuMDAxOTMrMC4xMzMwODI2KSwgIlxuIiwNCiAgICAiUENWOiAiLCAoMC4wMDUyMjUgLSAwLjAwMTkzKS8wLjAwNTIyNSwgIlxuIikNCmBgYA0KDQoNCmBgYHtyIE1vZGVsMTogUHJlZGljdGVkIHByb2JhYmlsaXR5IHNhZmUsIGNhY2hlPVRSVUV9DQpORUEyMDIyJHByZWRpY3RlZF8yIDwtIHByZWRpY3QoZmxiXzJfMCwgcmUuZm9ybSA9IE5VTEwsIHR5cGUgPSAicmVzcG9uc2UiKQ0KDQpORUEyMDIyJHJlc2lkdWFsXzIgPC0gTkVBMjAyMiRwbW9kZWw3X2VtcHYyX1QgLSBORUEyMDIyJHByZWRpY3RlZF8yDQoNCnN1bW1hcnlfcHJlZHNfMiA8LSBORUEyMDIyICU+JQ0KICBncm91cF9ieShnZW5kZXIsIG1pZ3JhdGlvbiwgZWR1Y2F0aW9uLCBsZWVmdGlqZCkgJT4lDQogIHN1bW1hcmlzZSgNCiAgICBtZWFuX3ByZWRfMiA9IG1lYW4ocHJlZGljdGVkXzIsIG5hLnJtID0gVFJVRSksDQogICAgc2VfcHJlZF8yID0gc2QocmVzaWR1YWxfMiwgbmEucm0gPSBUUlVFKSAvIHNxcnQobigpKSwNCiAgICBuID0gbigpLA0KICAgIC5ncm91cHMgPSAiZHJvcCINCiAgKQ0KDQpnZW5kZXJfbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJtIiA9ICJNZW4iLA0KICAidiIgPSAiV29tZW4iDQopKQ0KDQptaWdyYXRpb25fbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJubCIgICA9ICJObyBtaWdyYXRpb24gYmFja2dyb3VuZCIsDQogICJldSIgICA9ICJFdXJvcGVhbiIsDQogICJub2V1IiA9ICJOb24tRXVyb3BlYW4iDQopKQ0KDQplZHVjYXRpb25fbGFiZWxzIDwtIGFzX2xhYmVsbGVyKGMoDQogICJsYWFnIiAgID0gIkxvdyIsDQogICJtaWRkZWwiID0gIk1pZGRsZSIsDQogICJob29nIiAgID0gIkhpZ2giDQopKQ0KDQpnZ3Bsb3Qoc3VtbWFyeV9wcmVkc18yLCBhZXMoeCA9IGxlZWZ0aWpkLCB5ID0gbWVhbl9wcmVkXzIsIGNvbG9yID0gZ2VuZGVyKSkgKw0KICBnZW9tX3BvaW50KCkgKw0KICBnZW9tX2Vycm9yYmFyKGFlcyh5bWluID0gbWVhbl9wcmVkXzIgLSBzZV9wcmVkXzIsDQogICAgICAgICAgICAgICAgICAgIHltYXggPSBtZWFuX3ByZWRfMiArIHNlX3ByZWRfMiksDQogICAgICAgICAgICAgICAgd2lkdGggPSAwLA0KICAgICAgICAgICAgICAgIGFscGhhID0gMC40LA0KICAgICAgICAgICAgICAgIGxpbmV3aWR0aCA9IDAuMDA1DQogICAgICAgICAgICAgICAgKSArIA0KICBmYWNldF9ncmlkKHJvd3MgPSB2YXJzKGVkdWNhdGlvbiksIGNvbHMgPSB2YXJzKG1pZ3JhdGlvbiksDQogICAgICAgICAgICAgbGFiZWxsZXIgPSBsYWJlbGxlcigNCiAgICAgICAgICAgICAgIGVkdWNhdGlvbiA9IGVkdWNhdGlvbl9sYWJlbHMsDQogICAgICAgICAgICAgICBtaWdyYXRpb24gPSBtaWdyYXRpb25fbGFiZWxzDQogICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICBzd2l0Y2ggPSAieSINCiAgKSArDQogIGxhYnMoDQogICAgdGl0bGUgPSAiUHJlZGljdGVkIHByb2JhYmlsaXR5IHVuc2FmZSBzb2NpYWwgY2xpbWF0ZSBNb2RlbDEiLA0KICAgIHkgPSBOVUxMLA0KICAgIHggPSBOVUxMLA0KICAgIGNvbG9yID0gIkdlbmRlciINCiAgKSArDQogIHNjYWxlX2NvbG9yX21hbnVhbCh2YWx1ZXMgPSBjKCJtIiA9ICJzdGVlbGJsdWUiLCAidiIgPSAidG9tYXRvIiksDQogICAgICAgICAgICAgICAgICAgICBsYWJlbHMgPSBnZW5kZXJfbGFiZWxzKSArDQogIHRoZW1lX21pbmltYWwoKSArDQogIHRoZW1lKA0KICAgIGF4aXMudGl0bGUueS5yaWdodCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDkwKSwNCiAgICBzdHJpcC5iYWNrZ3JvdW5kID0gZWxlbWVudF9yZWN0KGZpbGwgPSAiZ3JheTkwIiwgY29sb3IgPSBOQSksDQogICAgc3RyaXAucGxhY2VtZW50ID0gIm91dHNpZGUiLA0KICAgIHN0cmlwLnRleHQueS5sZWZ0ID0gZWxlbWVudF90ZXh0KGFuZ2xlID0gMCksDQogICAgYXhpcy50aXRsZS55ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIGF4aXMudGV4dC55LmxlZnQgPSBlbGVtZW50X2JsYW5rKCksDQogICAgYXhpcy50aWNrcy55LmxlZnQgPSBlbGVtZW50X2JsYW5rKCksDQogICAgcGxvdC5tYXJnaW4gPSBtYXJnaW4oMTAsIDMwLCAxMCwgMTApDQogICkgKw0KICBzY2FsZV95X2NvbnRpbnVvdXMoDQogICAgbmFtZSA9IE5VTEwsDQogICAgc2VjLmF4aXMgPSBkdXBfYXhpcyhuYW1lID0gIlByZWRpY3RlZCBQcm9iYWJpbGl0eSIpDQogICkNCmBgYA0KDQpgYGB7ciB0b3AvYm90dG9tIDEwIHNhZmUsIGNhY2hlPVRSVUV9DQpwcmVkX2RmXzIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKA0KICAgIHByZWRfMiA9IHByZWRpY3QoZmxiXzJfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJGZpdCwNCiAgICBzZV9wcmVkXzIgPSBwcmVkaWN0KGZsYl8yXzEsIHR5cGUgPSAicmVzcG9uc2UiLCBzZS5maXQgPSBUUlVFKSRzZS5maXQNCiAgKSAlPiUNCiAgZ3JvdXBfYnkoaW50ZXJzZWN0aW9ucykgJT4lDQogIHN1bW1hcmlzZSgNCiAgICBwcmVkX21lYW5fMiA9IG1lYW4ocHJlZF8yLCBuYS5ybSA9IFRSVUUpLCANCiAgICBzZV9tZWFuXzIgPSBtZWFuKHNlX3ByZWRfMiwgbmEucm0gPSBUUlVFKQ0KICApICU+JQ0KICB1bmdyb3VwKCkNCg0KcHJlZF9kZl8yIDwtIHByZWRfZGZfMiAlPiUNCiAgbXV0YXRlKA0KICAgIGxvd2VyX0NJID0gcHJlZF9tZWFuXzIgLSAxLjk2ICogc2VfbWVhbl8yLA0KICAgIHVwcGVyX0NJID0gcHJlZF9tZWFuXzIgKyAxLjk2ICogc2VfbWVhbl8yDQogICkNCg0KDQpsaXN0XzIgPC0gcHJlZF9kZl8yICU+JQ0KICBhcnJhbmdlKGRlc2MocHJlZF9tZWFuXzIpKSAlPiUNCiAgbXV0YXRlKHJhbmsgPSByb3dfbnVtYmVyKCkpDQoNCnRvcDEwXzIgPC0gbGlzdF8yICU+JSBzbGljZSgxOjEwKQ0KYm90dG9tMTBfMiA8LSBsaXN0XzIgJT4lIHNsaWNlKChuKCkgLSA5KTpuKCkpDQoNCg0KbGlzdF8yIDwtIGJpbmRfcm93cygNCiAgdG9wMTBfMiAlPiUgbXV0YXRlKHR5cGUgPSAiVG9wIDEwIiksDQogIGJvdHRvbTEwXzIgJT4lIG11dGF0ZSh0eXBlID0gIkJvdHRvbSAxMCIpDQopDQoNCnByaW50KGxpc3RfMikNCg0KYGBgDQoNCjxicj48YnI+DQoNCiMgSGlnaGx5IHNhZmUgKENsYXNzIDMpDQoNCjxicj48YnI+DQoNCg0KYGBge3IgcmVncmVzc2lvbiBoaWdobHkgc2FmZSwgY2FjaGU9VFJVRX0NCk5FQTIwMjIgPC0gTkVBMjAyMiAlPiUNCiAgbXV0YXRlKHBtb2RlbDdfZW1wdjMgPSBwbW9kZWw3X2VtcHYzKQ0KDQpORUEyMDIyJHBtb2RlbDdfZW1wdjNfVCA8LSAoTkVBMjAyMiRwbW9kZWw3X2VtcHYzICogKDI5OTIzIC0gMSkgKyAwLjUpIC8gMjk5MjMNCg0KZmxiXzNfMCA8LSBnbG1tVE1CKHBtb2RlbDdfZW1wdjNfVCB+IDEgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQoNCmZsYl8zXzEgPC0gZ2xtbVRNQihwbW9kZWw3X2VtcHYzX1QgfiBnZW5kZXJfdiArIG1pZ3JhdGlvbl9ldSArIG1pZ3JhdGlvbl9ub2V1ICsgDQogICAgZWR1Y2F0aW9uX2xhYWcgKyBlZHVjYXRpb25fbWlkZGVsICsgbGVlZnRpamRfMzUuNTUgKyBsZWVmdGlqZF81NS43NSAgKyAoMSB8IGludGVyc2VjdGlvbnMpLA0KICAgICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICJsb2dpdCIpLA0KICAgICAgICAgICAgICAgICAgZGF0YSA9IE5FQTIwMjIpDQpzdW1tYXJ5KGZsYl8zXzApDQpzdW1tYXJ5KGZsYl8zXzEpDQpgYGANCg0KDQpgYGB7ciBDYWxjdWxhdGlvbiBJQ0MgaGlnaGx5IHNhZmUsIGNhY2hlPVRSVUV9DQoNCm11IDwtIGZpdHRlZChmbGJfM18wKQ0KdmFyX3kgPC0gbXUgKiAoMSAtIG11KSAvICgxICsgMC43NDUpDQptZWFuX3Zhcl93aXRoaW4gPC0gbWVhbih2YXJfeSkNCg0KY2F0KCJSZXNpZHVhbCB2YXJpYW5jZTogIiwgbWVhbih2YXJfeSksICJcbiIsDQogICAgIklDQyBtb2RlbCAwOiAiLCAwLjAxMzcyLygwLjAxMzcyKzAuMTE2OTMxNiksICJcbiIsDQogICAgIklDQyBmaW5hbDogIiwgMC4wMDA2ODkvKDAuMDAwNjg5KzAuMTE2OTMxNiksICJcbiIsDQogICAgIlBDVjogIiwgKDAuMDEzNzIgLSAwLjAwMDY4OSkvMC4wMTM3MiwgIlxuIikNCmBgYA0KDQoNCmBgYHtyIE1vZGVsMTogUHJlZGljdGVkIHByb2JhYmlsaXR5IGhpZ2hseSBzYWZlLCBjYWNoZT1UUlVFfQ0KTkVBMjAyMiRwcmVkaWN0ZWRfMyA8LSBwcmVkaWN0KGZsYl8zXzAsIHJlLmZvcm0gPSBOVUxMLCB0eXBlID0gInJlc3BvbnNlIikNCg0KTkVBMjAyMiRyZXNpZHVhbF8zIDwtIE5FQTIwMjIkcG1vZGVsN19lbXB2M19UIC0gTkVBMjAyMiRwcmVkaWN0ZWRfMw0KDQpzdW1tYXJ5X3ByZWRzXzMgPC0gTkVBMjAyMiAlPiUNCiAgZ3JvdXBfYnkoZ2VuZGVyLCBtaWdyYXRpb24sIGVkdWNhdGlvbiwgbGVlZnRpamQpICU+JQ0KICBzdW1tYXJpc2UoDQogICAgbWVhbl9wcmVkXzMgPSBtZWFuKHByZWRpY3RlZF8zLCBuYS5ybSA9IFRSVUUpLA0KICAgIHNlX3ByZWRfMyA9IHNkKHJlc2lkdWFsXzMsIG5hLnJtID0gVFJVRSkgLyBzcXJ0KG4oKSksDQogICAgbiA9IG4oKSwNCiAgICAuZ3JvdXBzID0gImRyb3AiDQogICkNCg0KZ2VuZGVyX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibSIgPSAiTWVuIiwNCiAgInYiID0gIldvbWVuIg0KKSkNCg0KbWlncmF0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibmwiICAgPSAiTm8gbWlncmF0aW9uIGJhY2tncm91bmQiLA0KICAiZXUiICAgPSAiRXVyb3BlYW4iLA0KICAibm9ldSIgPSAiTm9uLUV1cm9wZWFuIg0KKSkNCg0KZWR1Y2F0aW9uX2xhYmVscyA8LSBhc19sYWJlbGxlcihjKA0KICAibGFhZyIgICA9ICJMb3ciLA0KICAibWlkZGVsIiA9ICJNaWRkbGUiLA0KICAiaG9vZyIgICA9ICJIaWdoIg0KKSkNCg0KZ2dwbG90KHN1bW1hcnlfcHJlZHNfMywgYWVzKHggPSBsZWVmdGlqZCwgeSA9IG1lYW5fcHJlZF8zLCBjb2xvciA9IGdlbmRlcikpICsNCiAgZ2VvbV9wb2ludCgpICsNCiAgZ2VvbV9lcnJvcmJhcihhZXMoeW1pbiA9IG1lYW5fcHJlZF8zIC0gc2VfcHJlZF8zLA0KICAgICAgICAgICAgICAgICAgICB5bWF4ID0gbWVhbl9wcmVkXzMgKyBzZV9wcmVkXzMpLA0KICAgICAgICAgICAgICAgIHdpZHRoID0gMCwNCiAgICAgICAgICAgICAgICBhbHBoYSA9IDAuNCwNCiAgICAgICAgICAgICAgICBsaW5ld2lkdGggPSAwLjAwNQ0KICAgICAgICAgICAgICAgICkgKyANCiAgZmFjZXRfZ3JpZChyb3dzID0gdmFycyhlZHVjYXRpb24pLCBjb2xzID0gdmFycyhtaWdyYXRpb24pLA0KICAgICAgICAgICAgIGxhYmVsbGVyID0gbGFiZWxsZXIoDQogICAgICAgICAgICAgICBlZHVjYXRpb24gPSBlZHVjYXRpb25fbGFiZWxzLA0KICAgICAgICAgICAgICAgbWlncmF0aW9uID0gbWlncmF0aW9uX2xhYmVscw0KICAgICAgICAgICAgICksDQogICAgICAgICAgICAgc3dpdGNoID0gInkiDQogICkgKw0KICBsYWJzKA0KICAgIHRpdGxlID0gIlByZWRpY3RlZCBwcm9iYWJpbGl0eSB1bnNhZmUgc29jaWFsIGNsaW1hdGUgTW9kZWwxIiwNCiAgICB5ID0gTlVMTCwNCiAgICB4ID0gTlVMTCwNCiAgICBjb2xvciA9ICJHZW5kZXIiDQogICkgKw0KICBzY2FsZV9jb2xvcl9tYW51YWwodmFsdWVzID0gYygibSIgPSAic3RlZWxibHVlIiwgInYiID0gInRvbWF0byIpLA0KICAgICAgICAgICAgICAgICAgICAgbGFiZWxzID0gZ2VuZGVyX2xhYmVscykgKw0KICB0aGVtZV9taW5pbWFsKCkgKw0KICB0aGVtZSgNCiAgICBheGlzLnRpdGxlLnkucmlnaHQgPSBlbGVtZW50X3RleHQoYW5nbGUgPSA5MCksDQogICAgc3RyaXAuYmFja2dyb3VuZCA9IGVsZW1lbnRfcmVjdChmaWxsID0gImdyYXk5MCIsIGNvbG9yID0gTkEpLA0KICAgIHN0cmlwLnBsYWNlbWVudCA9ICJvdXRzaWRlIiwNCiAgICBzdHJpcC50ZXh0LnkubGVmdCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDApLA0KICAgIGF4aXMudGl0bGUueSA9IGVsZW1lbnRfYmxhbmsoKSwNCiAgICBheGlzLnRleHQueS5sZWZ0ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIGF4aXMudGlja3MueS5sZWZ0ID0gZWxlbWVudF9ibGFuaygpLA0KICAgIHBsb3QubWFyZ2luID0gbWFyZ2luKDEwLCAzMCwgMTAsIDEwKQ0KICApICsNCiAgc2NhbGVfeV9jb250aW51b3VzKA0KICAgIG5hbWUgPSBOVUxMLA0KICAgIHNlYy5heGlzID0gZHVwX2F4aXMobmFtZSA9ICJQcmVkaWN0ZWQgUHJvYmFiaWxpdHkiKQ0KICApDQpgYGANCg0KYGBge3IgdG9wL2JvdHRvbSAxMCBoaWdobHkgc2FmZSwgY2FjaGU9VFJVRX0NCnByZWRfZGZfMyA8LSBORUEyMDIyICU+JQ0KICBtdXRhdGUoDQogICAgcHJlZF8zID0gcHJlZGljdChmbGJfM18xLCB0eXBlID0gInJlc3BvbnNlIiwgc2UuZml0ID0gVFJVRSkkZml0LA0KICAgIHNlX3ByZWRfMyA9IHByZWRpY3QoZmxiXzNfMSwgdHlwZSA9ICJyZXNwb25zZSIsIHNlLmZpdCA9IFRSVUUpJHNlLmZpdA0KICApICU+JQ0KICBncm91cF9ieShpbnRlcnNlY3Rpb25zKSAlPiUNCiAgc3VtbWFyaXNlKA0KICAgIHByZWRfbWVhbl8zID0gbWVhbihwcmVkXzMsIG5hLnJtID0gVFJVRSksIA0KICAgIHNlX21lYW5fMyA9IG1lYW4oc2VfcHJlZF8zLCBuYS5ybSA9IFRSVUUpDQogICkgJT4lDQogIHVuZ3JvdXAoKQ0KDQpwcmVkX2RmXzMgPC0gcHJlZF9kZl8zICU+JQ0KICBtdXRhdGUoDQogICAgbG93ZXJfQ0kgPSBwcmVkX21lYW5fMyAtIDEuOTYgKiBzZV9tZWFuXzMsDQogICAgdXBwZXJfQ0kgPSBwcmVkX21lYW5fMyArIDEuOTYgKiBzZV9tZWFuXzMNCiAgKQ0KDQoNCmxpc3RfMyA8LSBwcmVkX2RmXzMgJT4lDQogIGFycmFuZ2UoZGVzYyhwcmVkX21lYW5fMykpICU+JQ0KICBtdXRhdGUocmFuayA9IHJvd19udW1iZXIoKSkNCg0KdG9wMTBfMyA8LSBsaXN0XzMgJT4lIHNsaWNlKDE6MTApDQpib3R0b20xMF8zIDwtIGxpc3RfMyAlPiUgc2xpY2UoKG4oKSAtIDkpOm4oKSkNCg0KDQpsaXN0XzMgPC0gYmluZF9yb3dzKA0KICB0b3AxMF8zICU+JSBtdXRhdGUodHlwZSA9ICJUb3AgMTAiKSwNCiAgYm90dG9tMTBfMyAlPiUgbXV0YXRlKHR5cGUgPSAiQm90dG9tIDEwIikNCikNCg0KcHJpbnQobGlzdF8zKQ0KDQpgYGANCg==</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("beta_models.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
